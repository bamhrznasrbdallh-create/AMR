<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="site-title">Ø§Ù…ØªØ¯Ø§Ø¯ - Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --dark-bg: #0a0a0a;
            --medium-bg: #111111;
            --light-bg: #1a1a1a;
            --primary-color: #006400;
            --secondary-color: #008000;
            --accent-color: #00ff00;
            --text-color: #e0e0e0;
            --error-color: #ff4444;
            --sold-color: #ff4d4d;
            --category-color: #003300;
            --cart-color: #00ff00;
            --button-color: #006400;
            --discount-color: #ff6b6b;
            --currency-color: #4da6ff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text-color);
            line-height: 1.6;
            padding-bottom: 60px;
            transition: background-color 0.3s, color 0.3s;
            background-image: var(--background-image, none);
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .mobile-video-banner {
            display: none;
            width: 100%;
            height: 120px;
            overflow: hidden;
            position: relative;
        }
        
        .mobile-video-banner video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .close-banner {
            position: absolute;
            top: 5px;
            left: 5px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            z-index: 10;
        }
        
        .floating-image {
            position: fixed;
            z-index: 999;
            width: 80px;
            height: 80px;
            object-fit: contain;
            pointer-events: none;
            display: none;
        }
        
        /* Ø²Ø± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        .floating-image-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            z-index: 998;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }
        
        .floating-image-toggle:hover {
            background-color: var(--secondary-color);
            transform: scale(1.1);
        }
        
        .floating-image-toggle.hidden {
            background-color: var(--error-color);
        }
        
        /* Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« */
        .search-container {
            margin: 20px 0;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 20px;
            padding-left: 50px;
            border-radius: 25px;
            border: 2px solid var(--primary-color);
            background-color: var(--light-bg);
            color: var(--text-color);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }
        
        .search-container::before {
            content: 'ğŸ”';
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
        }
        
        .clear-search-btn {
            position: absolute;
            left: 50px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.5rem;
            display: none;
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙ†ÙŠÙ */
        .sort-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .sort-btn {
            background-color: var(--medium-bg);
            color: var(--text-color);
            border: 1px solid var(--primary-color);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            flex-grow: 1;
        }
        
        .sort-btn:hover, .sort-btn.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ */
        .welcome-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .welcome-content {
            background-color: var(--medium-bg);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            animation: welcomeFadeIn 0.8s ease-out;
        }
        
        @keyframes welcomeFadeIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .welcome-content h2 {
            color: var(--accent-color);
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .welcome-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        
        .welcome-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .welcome-btn:hover {
            background-color: var(--secondary-color);
        }
        
        /* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background-color: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #ccc;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø³Ù„Ø© - NEW DESIGN */
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .cart-header h2 {
            color: var(--accent-color);
            margin: 0;
        }
        
        .cart-items-count {
            background-color: var(--cart-color);
            color: var(--dark-bg);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .cart-summary {
            background-color: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid var(--primary-color);
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 1.1rem;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .summary-item:last-child {
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
            font-size: 1.3rem;
        }
        
        .summary-total {
            color: var(--accent-color);
            font-weight: bold;
        }
        
        .cart-items {
            margin: 15px 0;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .cart-items::-webkit-scrollbar {
            width: 5px;
        }
        
        .cart-items::-webkit-scrollbar-track {
            background: var(--medium-bg);
            border-radius: 10px;
        }
        
        .cart-items::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }
        
        .cart-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: var(--medium-bg);
            transition: transform 0.2s;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .cart-item:hover {
            transform: translateX(-5px);
            border-color: var(--primary-color);
        }
        
        .cart-item img {
            width: 70px;
            height: 70px;
            object-fit: cover;
            border-radius: 8px;
            margin-left: 15px;
            border: 2px solid var(--primary-color);
        }
        
        .cart-item-info {
            flex-grow: 1;
        }
        
        .cart-item-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-color);
        }
        
        .cart-item-price {
            color: var(--accent-color);
            font-weight: bold;
        }
        
        .cart-item-category {
            font-size: 0.8rem;
            color: #999;
            margin-top: 3px;
        }
        
        .remove-from-cart {
            background: none;
            border: none;
            color: var(--error-color);
            cursor: pointer;
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s;
        }
        
        .remove-from-cart:hover {
            background-color: rgba(255, 68, 68, 0.1);
        }
        
        .empty-cart-message {
            text-align: center;
            padding: 40px 20px;
            color: #ccc;
        }
        
        .empty-cart-message i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            opacity: 0.5;
        }
        
        .cart-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .cart-actions button {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .whatsapp-link {
            background-color: #25D366;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .whatsapp-link:hover {
            background-color: #128C7E;
            transform: translateY(-2px);
        }
        
        .close-modal {
            background-color: var(--primary-color);
            color: white;
            border: none;
        }
        
        .close-modal:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .discount-badge {
            background-color: var(--discount-color);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .original-price {
            text-decoration: line-through;
            color: #999;
            font-size: 0.9rem;
            margin-left: 5px;
        }
        
        /* Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© */
        .current-currency {
            display: inline-flex;
            align-items: center;
            background-color: var(--currency-color);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .current-currency i {
            margin-left: 5px;
        }
        
        .currency-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 10px;
            background-color: var(--light-bg);
            border-radius: 8px;
        }
        
        .currency-flag {
            width: 24px;
            height: 16px;
            border-radius: 3px;
            object-fit: cover;
        }
        
        .currency-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .currency-option:hover {
            background-color: var(--medium-bg);
        }
        
        .currency-option.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .currency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        /* Ø¥Ø¶Ø§ÙØ§Øª CSS Ø§Ù„Ø£ØµÙ„ÙŠØ© */
        header {
            background-color: var(--medium-bg);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .logo img {
            height: 50px;
            margin-left: 15px;
            border-radius: 5px;
            object-fit: cover;
        }
        
        .logo h1 {
            color: var(--accent-color);
            font-size: 1.8rem;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 20px;
        }
        
        nav ul li a {
            color: var(--text-color);
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        nav ul li a:hover {
            background-color: var(--primary-color);
        }
        
        .admin-indicator {
            background-color: var(--primary-color);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            display: none;
        }
        
        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
            margin-right: 20px;
            color: var(--cart-color);
        }
        
        .cart-count {
            position: absolute;
            top: -10px;
            right: -10px;
            background-color: var(--cart-color);
            color: var(--dark-bg);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .categories {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding: 1rem 0;
            margin-bottom: 1rem;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .categories::-webkit-scrollbar {
            display: none;
        }
        
        .category {
            background-color: var(--category-color);
            padding: 8px 15px;
            border-radius: 20px;
            white-space: nowrap;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .category.active {
            background-color: var(--accent-color);
            color: var(--dark-bg);
            font-weight: bold;
        }
        
        .category:hover {
            background-color: var(--accent-color);
            color: var(--dark-bg);
        }
        
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .product {
            background-color: var(--medium-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
            height: 100%;
            cursor: pointer;
            position: relative;
        }
        
        .product.sold::before {
            content: 'ØªÙ… Ø§Ù„Ø¨ÙŠØ¹';
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: var(--sold-color);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
            z-index: 2;
        }
        
        .product:hover {
            transform: translateY(-5px);
        }
        
        .product-image {
            width: 100%;
            height: 200px;
            overflow: hidden;
        }
        
        .product img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-info {
            padding: 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--accent-color);
        }
        
        .product-price {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--accent-color);
            font-weight: bold;
        }
        
        .product-description {
            font-size: 0.9rem;
            margin-bottom: 15px;
            color: #ccc;
            flex-grow: 1;
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
        }
        
        .add-to-cart {
            background-color: var(--button-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            transition: background-color 0.3s;
        }
        
        .add-to-cart:hover {
            background-color: var(--secondary-color);
        }
        
        .remove-product {
            background-color: var(--error-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            display: none;
        }
        
        .mark-as-sold {
            background-color: var(--sold-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            display: none;
        }
        
        .cart-icon-btn {
            margin-left: 8px;
        }
        
        .admin-panel {
            background-color: var(--medium-bg);
            padding: 20px;
            border-radius: 8px;
            margin-top: 2rem;
            display: none;
        }
        
        .admin-panel h2 {
            color: var(--accent-color);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .admin-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--light-bg);
            flex-wrap: wrap;
        }
        
        .admin-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }
        
        .admin-tab.active {
            border-bottom: 3px solid var(--accent-color);
            color: var(--accent-color);
        }
        
        .admin-form {
            display: grid;
            gap: 15px;
        }
        
        .admin-form input, .admin-form textarea, .admin-form button, .admin-form select, .admin-form .file-input {
            padding: 10px;
            border-radius: 4px;
            border: 1px solid var(--light-bg);
            background-color: var(--light-bg);
            color: var(--text-color);
        }
        
        .file-input {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .file-input input[type="file"] {
            display: none;
        }
        
        .file-input-label {
            background-color: var(--primary-color);
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .file-input-label:hover {
            background-color: var(--secondary-color);
        }
        
        .admin-form button {
            background-color: var(--primary-color);
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .admin-form button:hover {
            background-color: var(--secondary-color);
        }
        
        .color-picker {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            margin: 15px 0;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            background: var(--light-bg);
            border-radius: 8px;
        }
        
        .color-option {
            height: 40px;
            border-radius: 4px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            text-align: center;
            word-break: break-word;
            padding: 2px;
        }
        
        .color-option:hover {
            transform: scale(1.05);
        }
        
        .color-option.active {
            border-color: white;
            box-shadow: 0 0 5px white;
        }
        
        .color-section {
            margin-bottom: 20px;
            padding: 15px;
            background: var(--light-bg);
            border-radius: 8px;
        }
        
        .color-section h4 {
            margin-bottom: 10px;
            color: var(--accent-color);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: var(--medium-bg);
            padding: 2rem;
            border-radius: 8px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal h2 {
            color: var(--accent-color);
            margin-bottom: 1rem;
            text-align: center;
        }
        
        .modal p {
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            display: none;
            z-index: 1000;
        }
        
        .change-password {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--light-bg);
        }
        
        .message-item {
            background-color: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .message-content {
            margin-bottom: 10px;
        }
        
        .message-date {
            font-size: 0.8rem;
            color: #999;
            text-align: left;
        }
        
        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1100;
            justify-content: center;
            align-items: center;
        }
        
        .image-modal-content {
            max-width: 90%;
            max-height: 90%;
        }
        
        .image-modal-content img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .close-image-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 2rem;
            cursor: pointer;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 768px) {
            header {
                flex-wrap: wrap;
            }
            
            nav {
                order: 3;
                width: 100%;
                margin-top: 10px;
            }
            
            nav ul {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(100%, 1fr));
            }
            
            .categories {
                padding: 0.5rem 0;
            }
            
            .logo h1 {
                font-size: 1.5rem;
            }
            
            nav ul li {
                margin-left: 10px;
                margin-bottom: 5px;
            }
            
            .mobile-video-banner {
                display: block;
            }
            
            .admin-tabs {
                overflow-x: auto;
                flex-wrap: nowrap;
            }
            
            .search-container {
                margin: 15px 0;
            }
            
            .sort-buttons {
                overflow-x: auto;
                display: flex;
                gap: 5px;
                margin-bottom: 15px;
            }
            
            .sort-btn {
                padding: 6px 12px;
                font-size: 0.8rem;
                white-space: nowrap;
            }
            
            .floating-image-toggle {
                bottom: 80px;
                right: 15px;
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .welcome-content {
                padding: 20px;
            }
            
            .welcome-content h2 {
                font-size: 1.5rem;
            }
            
            .cart-item {
                padding: 10px;
            }
            
            .cart-item img {
                width: 50px;
                height: 50px;
                margin-left: 10px;
            }
            
            .cart-actions {
                flex-direction: column;
            }
            
            .currency-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 769px) {
            .mobile-video-banner {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
    <div class="welcome-modal" id="welcome-modal">
        <div class="welcome-content">
            <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ <span id="welcome-site-name">Ø§Ù…ØªØ¯Ø§Ø¯</span>!</h2>
            <p>Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</p>
            <button id="close-welcome" class="welcome-btn">Ø§Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³ÙˆÙ‚</button>
        </div>
    </div>

    <div class="mobile-video-banner" id="mobile-video-banner">
        <button class="close-banner" id="close-banner">&times;</button>
        <video id="banner-video" loop muted autoplay>
        </video>
    </div>

    <img class="floating-image" id="floating-image" src="" alt="ØµÙˆØ±Ø© Ù…ØªØ­Ø±ÙƒØ©">
    
    <!-- Ø²Ø± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© -->
    <button class="floating-image-toggle" id="floating-image-toggle" title="Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©">
        <i class="fas fa-image"></i>
    </button>

    <header>
        <div class="logo" id="logo-container">
            <img src="" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹" id="site-logo">
            <h1 id="site-name">Ø§Ù…ØªØ¯Ø§Ø¯</h1>
        </div>
        <nav>
            <ul>
                <li><a href="#" class="nav-link" data-section="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="#" class="nav-link" data-section="products">Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§</a></li>
                <li><a href="#" class="nav-link" data-section="messages">Ø§Ù…ØªØ¯Ø§Ø¯</a></li>
                <li><a href="#" class="nav-link" data-section="contact">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a></li>
                <li><a href="#" id="admin-login">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±</a></li>
            </ul>
        </nav>
        <div class="cart-icon" id="cart-icon">
            <i class="fas fa-shopping-cart"></i>
            <div class="cart-count" id="cart-count">0</div>
        </div>
        <div class="admin-indicator" id="admin-indicator">ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¯ÙŠØ±</div>
    </header>

    <div class="container">
        <!-- Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« -->
        <div class="search-container" id="search-container">
            <input type="text" id="product-search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..." class="search-input">
            <button id="clear-search" class="clear-search-btn">&times;</button>
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙ†ÙŠÙ -->
        <div class="sort-buttons" id="sort-buttons">
            <button class="sort-btn active" data-sort="default">Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</button>
            <button class="sort-btn" data-sort="price-asc">Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ø£Ø¹Ù„Ù‰</button>
            <button class="sort-btn" data-sort="price-desc">Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„</button>
            <button class="sort-btn" data-sort="newest">Ø§Ù„Ø£Ø­Ø¯Ø«</button>
        </div>

        <!-- Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© -->
        <div class="currency-selector" id="current-currency-display">
            <span class="current-currency" id="current-currency">
                <i class="fas fa-money-bill-wave"></i>
                <span id="currency-name">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
            </span>
            <span id="currency-rate">Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù: Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...</span>
        </div>

        <div class="categories" id="categories-container">
        </div>

        <section class="gallery" id="products-gallery">
        </section>

        <section id="messages-section" style="display: none;">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--accent-color);">Ù‚Ø³Ù… Ø§Ù…ØªØ¯Ø§Ø¯</h2>
            <div id="messages-container">
            </div>
        </section>

        <section class="admin-panel" id="admin-panel">
            <h2>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</h2>
            
            <div class="admin-tabs">
                <div class="admin-tab active" data-tab="products">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
                <div class="admin-tab" data-tab="categories">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
                <div class="admin-tab" data-tab="messages">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</div>
                <div class="admin-tab" data-tab="currencies">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Øª</div>
                <div class="admin-tab" data-tab="colors">ØªØ®ØµÙŠØµ Ø§Ù„Ø£Ù„ÙˆØ§Ù†</div>
                <div class="admin-tab" data-tab="media">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ³Ø§Ø¦Ø·</div>
                <div class="admin-tab" data-tab="stats">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</div>
                <div class="admin-tab" data-tab="discounts">Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª</div>
                <div class="admin-tab" data-tab="settings">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
            </div>
            
            <div class="admin-tab-content" id="admin-products">
                <h3>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
                <form class="admin-form" id="add-product-form">
                    <input type="text" id="product-title" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" required>
                    <div class="currency-selector" style="margin-bottom: 15px;">
                        <select id="product-currency" style="width: 100%;">
                            <option value="YER">Ø±ÙŠØ§Ù„ ÙŠÙ…Ù†ÙŠ (Ø±.ÙŠ)</option>
                            <option value="SAR">Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ (Ø±.Ø³)</option>
                            <option value="USD">Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ ($)</option>
                        </select>
                    </div>
                    <input type="number" id="product-price" placeholder="Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ (Ù…Ø«Ø§Ù„: 5)" step="0.01" min="0" required>
                    <input type="number" id="product-discount" placeholder="Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… % (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" min="0" max="100">
                    <select id="product-category" required>
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                    </select>
                    <textarea id="product-description" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬" rows="3" required></textarea>
                    
                    <div class="file-input">
                        <span id="file-name">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©</span>
                        <label for="product-image" class="file-input-label">Ø§Ø®ØªØ± ØµÙˆØ±Ø©</label>
                        <input type="file" id="product-image" accept="image/*" required>
                    </div>
                    
                    <button type="submit" id="product-submit-btn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
                </form>

                <h3 style="margin-top: 30px;">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
                <div id="admin-products-list">
                </div>
            </div>
            
            <div class="admin-tab-content" id="admin-categories" style="display: none;">
                <h3>Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯</h3>
                <form class="admin-form" id="add-category-form">
                    <input type="text" id="category-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù…" required>
                    <button type="submit">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø³Ù…</button>
                </form>
                
                <h3 style="margin-top: 20px;">Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
                <ul id="categories-list">
                </ul>
            </div>
            
            <div class="admin-tab-content" id="admin-messages" style="display: none;">
                <h3>Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
                <form class="admin-form" id="add-message-form">
                    <textarea id="message-content" placeholder="Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©" rows="4" required></textarea>
                    <button type="submit">Ù†Ø´Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
                </form>
                
                <h3 style="margin-top: 20px;">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø©</h3>
                <div id="admin-messages-list">
                </div>
            </div>
            
            <div class="admin-tab-content" id="admin-currencies" style="display: none;">
                <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Øª</h3>
                
                <div class="color-section">
                    <h4>Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ù…ÙˆÙ‚Ø¹</h4>
                    <div class="currency-grid" id="base-currency-selector">
                        <div class="currency-option" data-currency="YER">
                            <span>ğŸ‡¾ğŸ‡ª</span>
                            <span>Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„ÙŠÙ…Ù†ÙŠ (Ø±.ÙŠ)</span>
                        </div>
                        <div class="currency-option" data-currency="SAR">
                            <span>ğŸ‡¸ğŸ‡¦</span>
                            <span>Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ (Ø±.Ø³)</span>
                        </div>
                        <div class="currency-option" data-currency="USD">
                            <span>ğŸ‡ºğŸ‡¸</span>
                            <span>Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ ($)</span>
                        </div>
                    </div>
                    
                    <button id="save-base-currency" style="margin-top: 15px; width: 100%;">Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</button>
                </div>
                
                <div class="color-section">
                    <h4>Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h4>
                    <div id="exchange-rates-display">
                        <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù...</p>
                    </div>
                    <button id="update-exchange-rates" style="margin-top: 10px; width: 100%;">ØªØ­Ø¯ÙŠØ« Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù</button>
                </div>
                
                <div class="color-section">
                    <h4>ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„ÙŠØ¯ÙˆÙŠ</h4>
                    <form class="admin-form" id="manual-conversion-form">
                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 10px; align-items: center;">
                            <input type="number" id="convert-from" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" step="0.01" min="0">
                            <select id="convert-from-currency">
                                <option value="YER">Ø±.ÙŠ</option>
                                <option value="SAR">Ø±.Ø³</option>
                                <option value="USD">$</option>
                            </select>
                            <span style="text-align: center;">â†’</span>
                            <input type="text" id="convert-to" placeholder="Ø§Ù„Ù†ØªÙŠØ¬Ø©" readonly>
                            <select id="convert-to-currency">
                                <option value="YER">Ø±.ÙŠ</option>
                                <option value="SAR" selected>Ø±.Ø³</option>
                                <option value="USD">$</option>
                            </select>
                        </div>
                        <button type="button" id="convert-currency">ØªØ­ÙˆÙŠÙ„</button>
                    </form>
                </div>
                
                <div class="color-section">
                    <h4>Ø§Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h4>
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <input type="checkbox" id="auto-geolocation" checked>
                        <label for="auto-geolocation">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</label>
                    </div>
                    <p style="font-size: 0.9rem; color: #999;">Ø¹Ù†Ø¯ ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø©ØŒ Ø³ÙŠØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙˆØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¨Ù„Ø¯Ù‡</p>
                    
                    <div id="geolocation-status" style="margin-top: 15px; padding: 10px; background: var(--medium-bg); border-radius: 5px;">
                        <p>Ø¬Ø§Ø±ÙŠ Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹...</p>
                    </div>
                </div>
            </div>
            
            <div class="admin-tab-content" id="admin-colors" style="display: none;">
                <h3>ØªØ®ØµÙŠØµ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
                
                <div class="color-section">
                    <h4>Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©:</h4>
                    <div class="color-picker" id="bg-color-picker">
                    </div>
                </div>
                
                <div class="color-section">
                    <h4>Ù„ÙˆÙ† Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:</h4>
                    <div class="color-picker" id="primary-color-picker">
                    </div>
                </div>
                
                <div class="color-section">
                    <h4>Ù„ÙˆÙ† Ø§Ù„Ù†Øµ:</h4>
                    <div class="color-picker" id="text-color-picker">
                    </div>
                </div>
                
                <div class="color-section">
                    <h4>Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø±:</h4>
                    <div class="color-picker" id="button-color-picker">
                    </div>
                </div>
                
                <div class="color-section">
                    <h4>Ù„ÙˆÙ† Ø§Ù„Ø³Ù„Ø©:</h4>
                    <div class="color-picker" id="cart-color-picker">
                    </div>
                </div>
                
                <button id="reset-colors" style="margin-top: 20px; width: 100%;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø· Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</button>
            </div>
            
            <div class="admin-tab-content" id="admin-media" style="display: none;">
                <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ³Ø§Ø¦Ø·</h3>
                
                <div class="color-section">
                    <h4>ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¬ÙˆØ§Ù„ (ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ):</h4>
                    <div class="file-input">
                        <span id="video-file-name">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ÙÙŠØ¯ÙŠÙˆ</span>
                        <label for="mobile-video" class="file-input-label">Ø§Ø®ØªØ± ÙÙŠØ¯ÙŠÙˆ</label>
                        <input type="file" id="mobile-video" accept="video/*">
                    </div>
                    <button id="remove-video" style="margin-top: 10px; width: 100%; background: var(--error-color);">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
                </div>
                
                <div class="color-section">
                    <h4>ØµÙˆØ±Ø© Ù…ØªØ­Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹:</h4>
                    <div class="file-input">
                        <span id="floating-image-file-name">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©</span>
                        <label for="floating-image-input" class="file-input-label">Ø§Ø®ØªØ± ØµÙˆØ±Ø©</label>
                        <input type="file" id="floating-image-input" accept="image/*">
                    </div>
                    <div class="admin-form">
                        <label for="animation-speed">Ø³Ø±Ø¹Ø© Ø§Ù„Ø­Ø±ÙƒØ©:</label>
                        <input type="range" id="animation-speed" min="1" max="10" value="5">
                        <label for="animation-direction">Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ©:</label>
                        <select id="animation-direction">
                            <option value="random">Ø¹Ø´ÙˆØ§Ø¦ÙŠ</option>
                            <option value="horizontal">Ø£ÙÙ‚ÙŠ</option>
                            <option value="vertical">Ø¹Ù…ÙˆØ¯ÙŠ</option>
                            <option value="circular">Ø¯Ø§Ø¦Ø±ÙŠ</option>
                        </select>
                    </div>
                    <button id="remove-floating-image" style="margin-top: 10px; width: 100%; background: var(--error-color);">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©</button>
                </div>
                
                <div class="color-section">
                    <h4>Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹:</h4>
                    <div class="file-input">
                        <span id="background-file-name">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø®Ù„ÙÙŠØ©</span>
                        <label for="background-image" class="file-input-label">Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ø®Ù„ÙÙŠØ©</label>
                        <input type="file" id="background-image" accept="image/*">
                    </div>
                    <button id="remove-background" style="margin-top: 10px; width: 100%; background: var(--error-color);">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©</button>
                </div>

                <div class="color-section css-control">
                    <h4>ØªØ­Ù…ÙŠÙ„ CSS Ø®Ø§Ø±Ø¬ÙŠ:</h4>
                    <div class="file-input">
                        <span id="css-file-name">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù CSS</span>
                        <label for="custom-css-input" class="file-input-label">Ø§Ø®ØªØ± Ù…Ù„Ù CSS</label>
                        <input type="file" id="custom-css-input" accept=".css">
                    </div>
                    <button id="remove-custom-css" style="margin-top: 10px; width: 100%; background: var(--error-color);">Ø¥Ø²Ø§Ù„Ø© CSS Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</button>
                </div>
            </div>
            
            <div class="admin-tab-content" id="admin-stats" style="display: none;">
                <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-products">0</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="sold-products">0</div>
                        <div class="stat-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-categories">0</div>
                        <div class="stat-label">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-messages">0</div>
                        <div class="stat-label">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-orders">0</div>
                        <div class="stat-label">Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="active-users">0</div>
                        <div class="stat-label">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</div>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h4>Ø¢Ø®Ø± 5 Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¶Ø§ÙØ©</h4>
                    <div id="recent-products"></div>
                </div>
            </div>
            
            <div class="admin-tab-content" id="admin-discounts" style="display: none;">
                <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª</h3>
                
                <div class="color-section">
                    <h4>Ø®ØµÙ… Ø¹Ø§Ù… Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h4>
                    <form class="admin-form" id="global-discount-form">
                        <input type="number" id="global-discount-percent" placeholder="Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… %" min="0" max="100">
                        <button type="submit">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø¹Ø§Ù…</button>
                    </form>
                    <button id="remove-global-discount" style="margin-top: 10px; width: 100%; background: var(--error-color);">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø¹Ø§Ù…</button>
                </div>
                
                <div class="color-section">
                    <h4>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø®ØµÙˆÙ…Ø§Øª</h4>
                    <div id="discounted-products-list"></div>
                </div>
            </div>
            
            <div class="admin-tab-content" id="admin-settings" style="display: none;">
                <div class="color-section">
                    <h3>ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
                    <form class="admin-form" id="change-site-name-form">
                        <input type="text" id="new-site-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯" required>
                        <button type="submit">ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù…</button>
                    </form>
                </div>

                <div class="color-section">
                    <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</h3>
                    <form class="admin-form" id="change-whatsapp-form">
                        <input type="text" id="whatsapp-number" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ (Ù…Ø«Ø§Ù„: +967784026726)" required>
                        <button type="submit">ØªØºÙŠÙŠØ± Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„</button>
                    </form>
                </div>

                <div class="color-section">
                    <h3>Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</h3>
                    <button id="export-data" class="admin-form-button" style="width: 100%; margin-bottom: 10px;">ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                    <div class="file-input">
                        <input type="file" id="import-data" accept=".json">
                        <label for="import-data" class="file-input-label">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</label>
                    </div>
                </div>
                
                <div class="change-password">
                    <h3>ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h3>
                    <form class="admin-form" id="change-password-form">
                        <input type="password" id="current-password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©" required>
                        <input type="password" id="new-password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©" required>
                        <button type="submit">ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>
                    </form>
                </div>
            </div>
        </section>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© -->
    <div class="modal" id="purchase-modal">
        <div class="modal-content">
            <div class="cart-header">
                <h2>ğŸ›’ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
                <span class="cart-items-count" id="modal-cart-count">0 Ù…Ù†ØªØ¬</span>
            </div>
            
            <div class="cart-items" id="cart-items">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
            </div>
            
            <div class="cart-summary">
                <div class="summary-item">
                    <span>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span>
                    <span id="summary-count">0</span>
                </div>
                <div class="summary-item">
                    <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø¬Ø²Ø¦ÙŠ:</span>
                    <span id="summary-subtotal">0 <span id="summary-currency"></span></span>
                </div>
                <div class="summary-item">
                    <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª:</span>
                    <span id="summary-discount">0 <span id="discount-currency"></span></span>
                </div>
                <div class="summary-item">
                    <span>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                    <span id="summary-total" class="summary-total">0 <span id="total-currency"></span></span>
                </div>
            </div>
            
            <div class="cart-actions">
                <button class="whatsapp-link" id="confirm-purchase">
                    <i class="fab fa-whatsapp"></i> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
                </button>
                <button class="close-modal" id="close-modal">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ³ÙˆÙ‚</button>
            </div>
        </div>
    </div>

    <div class="image-modal" id="image-modal">
        <span class="close-image-modal" id="close-image-modal">&times;</span>
        <div class="image-modal-content">
            <img id="expanded-image" src="">
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <footer>
        <p>Â© 2025 Ø§Ù…ØªØ¯Ø§Ø¯. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
    </footer>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ®Ø²ÙŠÙ†
        let products = JSON.parse(localStorage.getItem('extension_products')) || [];
        let categories = JSON.parse(localStorage.getItem('extension_categories')) || ['ØªÙ‚Ø³Ø§Ù…Ø§Øª Ù…ÙˆØ§Ø¯', 'Ù‚Ø³Ù… Ø¢Ø®Ø±', 'Ø§Ø±Ù‚Ø§Ù… ÙˆÙ‡ÙŠØ¨Ø©'];
        let messages = JSON.parse(localStorage.getItem('extension_messages')) || [];
        let cart = JSON.parse(localStorage.getItem('extension_cart')) || [];
        let isAdmin = localStorage.getItem('extension_admin') === 'true';
        const defaultPassword = '775019707Ø¨Ø§Ù…Ø­Ø±Ø²';
        let adminPassword = localStorage.getItem('extension_password') || defaultPassword;
        let whatsappNumber = localStorage.getItem('extension_whatsapp') || '+967784026726';
        let currentCategory = 'Ø§Ù„ÙƒÙ„';
        let currentSection = 'products';
        let currentSort = 'default';
        let searchQuery = '';
        let globalDiscount = JSON.parse(localStorage.getItem('extension_global_discount')) || 0;
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Øª
        const currencies = {
            YER: {
                code: 'YER',
                name: 'Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„ÙŠÙ…Ù†ÙŠ',
                symbol: 'Ø±.ÙŠ',
                flag: 'ğŸ‡¾ğŸ‡ª',
                country: 'Ø§Ù„ÙŠÙ…Ù†',
                exchangeRate: 1 // Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„ÙŠÙ…Ù†ÙŠ Ù‡Ùˆ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
            },
            SAR: {
                code: 'SAR',
                name: 'Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ',
                symbol: 'Ø±.Ø³',
                flag: 'ğŸ‡¸ğŸ‡¦',
                country: 'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©',
                exchangeRate: 0.02 // 1 Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ = 50 Ø±ÙŠØ§Ù„ ÙŠÙ…Ù†ÙŠ (ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹)
            },
            USD: {
                code: 'USD',
                name: 'Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ',
                symbol: '$',
                flag: 'ğŸ‡ºğŸ‡¸',
                country: 'Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©',
                exchangeRate: 0.0075 // 1 Ø¯ÙˆÙ„Ø§Ø± = 133 Ø±ÙŠØ§Ù„ ÙŠÙ…Ù†ÙŠ (ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹)
            }
        };
        
        let baseCurrency = localStorage.getItem('extension_base_currency') || 'YER';
        let userCurrency = localStorage.getItem('extension_user_currency') || baseCurrency;
        let autoGeolocation = localStorage.getItem('extension_auto_geolocation') !== 'false'; // Ù…ÙØ¹Ù„ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
        let userCountry = localStorage.getItem('extension_user_country') || null;
        
        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„Ø©
        const colorPalette = [
            { name: "Ø¬Ø¯ÙŠØ¯", color: "#F0F0F0" }, { name: "Ø§Ù„Ø¬Ø²Ø§Ø¦ÙŠØª", color: "#E8E8E8" }, { name: "Ø¸Ù„", color: "#D3D3D3" },
            { name: "Ø±Ù…Ø§ÛŒÙ‡", color: "#C0C0C0" }, { name: "ØªØ§Ø¨Ø¹", color: "#A9A9A9" }, { name: "Ø§Ù„Ù…Ø±Ù…Ø±", color: "#808080" },
            { name: "Ù„Ø¤Ù„Ø¤Ø©", color: "#696969" }, { name: "Ø£Ø¨ÙŠØ¶", color: "#FFFFFF" }, { name: "Ø¯Ø®Ø§Ù†", color: "#F5F5F5" },
            { name: "ÙØµÙ„Ø©", color: "#DCDCDC" }, { name: "Ø³Ø­Ø§Ø¨", color: "#D3D3D3" }, { name: "Ø¨Ø¬ÙˆØªØ±", color: "#C0C0C0" },
            { name: "Ù‚Ø·Ù†", color: "#F8F8FF" }, { name: "Ù‚Ø´Ø±Ø©", color: "#FFF5EE" }, { name: "ÙŠØ¨Ø¶", color: "#FDF5E6" },
            { name: "Ø¹Ø§Ø¬", color: "#FFFFF0" }, { name: "ÙØ­Ù…", color: "#36454F" }, { name: "Ø£Ø³ÙˆØ¯", color: "#000000" },
            { name: "Ø£Ø³Ù…ÙˆØ¯", color: "#1C1C1C" }, { name: "Ø°Ù‡Ø¨", color: "#FFD700" }, { name: "Ø£ØµÙØ±", color: "#FFFF00" },
            { name: "Ø¹Ø³Ù„", color: "#F0E68C" }, { name: "Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ", color: "#FFA500" }, { name: "Ù†Ø§Ø±ÙŠ", color: "#FF4500" },
            { name: "Ø£Ø­Ù…Ø±", color: "#FF0000" }, { name: "ÙˆØ±Ø¯ÙŠ", color: "#FFC0CB" }, { name: "Ø¨Ù†ÙØ³Ø¬ÙŠ", color: "#8A2BE2" },
            { name: "Ø£Ø²Ø±Ù‚", color: "#0000FF" }, { name: "ØªØ±ÙƒÙˆØ§Ø²", color: "#40E0D0" }, { name: "Ø£Ø®Ø¶Ø±", color: "#008000" },
            { name: "Ø²Ù…Ø±Ø¯ÙŠ", color: "#50C878" }, { name: "Ø¨Ù†ÙŠ", color: "#A52A2A" }, { name: "Ø±Ù…Ù„ÙŠ", color: "#F4A460" },
            { name: "ÙƒØ±ÙŠÙ…ÙŠ", color: "#FFFDD0" }, { name: "ÙØ¶ÙŠ", color: "#C0C0C0" }, { name: "Ø°Ù‡Ø¨ÙŠ", color: "#FFD700" },
            { name: "Ù†Ø­Ø§Ø³ÙŠ", color: "#B87333" }, { name: "Ø¨Ø±ÙˆÙ†Ø²ÙŠ", color: "#CD7F32" }, { name: "Ø²Ù‡Ø±ÙŠ", color: "#FF69B4" },
            { name: "Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ", color: "#800080" }, { name: "Ù†ÙŠÙ„ÙŠ", color: "#4B0082" }, { name: "Ø³Ù…Ø§ÙˆÙŠ", color: "#87CEEB" },
            { name: "ÙÙŠØ±ÙˆØ²ÙŠ", color: "#30D5C8" }, { name: "Ø²ÙŠØªÙˆÙ†ÙŠ", color: "#808000" }, { name: "Ù„ÙŠÙ…ÙˆÙ†ÙŠ", color: "#FFF44F" },
            { name: "Ø®ÙˆØ®ÙŠ", color: "#FFDAB9" }, { name: "Ù„Ø§ÙÙ†Ø¯Ø±", color: "#E6E6FA" }, { name: "Ù…Ø±Ø¬Ø§Ù†ÙŠ", color: "#FF7F50" },
            { name: "Ø³Ù„Ù…ÙˆÙ†", color: "#FA8072" }, { name: "Ù‚Ø±Ù…Ø²ÙŠ", color: "#DC143C" }, { name: "ÙƒØ³ØªÙ†Ø§Ø¦ÙŠ", color: "#800000" },
            { name: "Ø¨ÙˆØ±Ø¬ÙˆÙ†Ø¯ÙŠ", color: "#800020" }, { name: "Ø²ÙŠØªÙŠ", color: "#708238" }, { name: "Ø§Ø®Ø¶Ø± Ø¨Ø­Ø±ÙŠ", color: "#2E8B57" },
            { name: "Ø§Ø®Ø¶Ø± ØºØ§Ù…Ù‚", color: "#006400" }, { name: "Ø§Ø²Ø±Ù‚ ÙØ§ØªØ­", color: "#ADD8E6" }, { name: "Ø§Ø²Ø±Ù‚ ØºØ§Ù…Ù‚", color: "#00008B" },
            { name: "Ø¨Ù†ÙØ³Ø¬ÙŠ ÙØ§ØªØ­", color: "#9370DB" }, { name: "Ø¨Ù†ÙØ³Ø¬ÙŠ ØºØ§Ù…Ù‚", color: "#483D8B" }
        ];
        
        // Ø¹Ù†Ø§ØµØ± DOM
        const productsGallery = document.getElementById('products-gallery');
        const categoriesContainer = document.getElementById('categories-container');
        const messagesContainer = document.getElementById('messages-container');
        const messagesSection = document.getElementById('messages-section');
        const cartCount = document.getElementById('cart-count');
        const cartIcon = document.getElementById('cart-icon');
        const adminLogin = document.getElementById('admin-login');
        const adminPanel = document.getElementById('admin-panel');
        const adminIndicator = document.getElementById('admin-indicator');
        const addProductForm = document.getElementById('add-product-form');
        const productImageInput = document.getElementById('product-image');
        const fileNameSpan = document.getElementById('file-name');
        const productCategorySelect = document.getElementById('product-category');
        const purchaseModal = document.getElementById('purchase-modal');
        const cartItemsContainer = document.getElementById('cart-items');
        const confirmPurchaseButton = document.getElementById('confirm-purchase');
        const closeModal = document.getElementById('close-modal');
        const notification = document.getElementById('notification');
        const siteLogo = document.getElementById('site-logo');
        const logoContainer = document.getElementById('logo-container');
        const changePasswordForm = document.getElementById('change-password-form');
        const addCategoryForm = document.getElementById('add-category-form');
        const categoriesList = document.getElementById('categories-list');
        const adminTabs = document.querySelectorAll('.admin-tab');
        const adminTabContents = document.querySelectorAll('.admin-tab-content');
        const navLinks = document.querySelectorAll('.nav-link');
        const addMessageForm = document.getElementById('add-message-form');
        const adminMessagesList = document.getElementById('admin-messages-list');
        const imageModal = document.getElementById('image-modal');
        const expandedImage = document.getElementById('expanded-image');
        const closeImageModal = document.getElementById('close-image-modal');
        const resetColorsButton = document.getElementById('reset-colors');
        const mobileVideoBanner = document.getElementById('mobile-video-banner');
        const bannerVideo = document.getElementById('banner-video');
        const closeBanner = document.getElementById('close-banner');
        const mobileVideoInput = document.getElementById('mobile-video');
        const videoFileName = document.getElementById('video-file-name');
        const removeVideoButton = document.getElementById('remove-video');
        const floatingImage = document.getElementById('floating-image');
        const floatingImageInput = document.getElementById('floating-image-input');
        const floatingImageFileName = document.getElementById('floating-image-file-name');
        const removeFloatingImageButton = document.getElementById('remove-floating-image');
        const animationSpeed = document.getElementById('animation-speed');
        const animationDirection = document.getElementById('animation-direction');
        const backgroundImageInput = document.getElementById('background-image');
        const backgroundFileName = document.getElementById('background-file-name');
        const removeBackgroundButton = document.getElementById('remove-background');
        const changeSiteNameForm = document.getElementById('change-site-name-form');
        const newSiteNameInput = document.getElementById('new-site-name');
        const siteNameElement = document.getElementById('site-name');
        const siteTitleElement = document.getElementById('site-title');
        const adminProductsList = document.getElementById('admin-products-list');
        const changeWhatsappForm = document.getElementById('change-whatsapp-form');
        const whatsappNumberInput = document.getElementById('whatsapp-number');
        const welcomeModal = document.getElementById('welcome-modal');
        const closeWelcomeBtn = document.getElementById('close-welcome');
        const welcomeSiteName = document.getElementById('welcome-site-name');
        const floatingImageToggle = document.getElementById('floating-image-toggle');
        const productSearch = document.getElementById('product-search');
        const clearSearchBtn = document.getElementById('clear-search');
        const sortButtons = document.querySelectorAll('.sort-btn');
        const productSubmitBtn = document.getElementById('product-submit-btn');
        const modalCartCount = document.getElementById('modal-cart-count');
        const summaryCount = document.getElementById('summary-count');
        const summarySubtotal = document.getElementById('summary-subtotal');
        const summaryDiscount = document.getElementById('summary-discount');
        const summaryTotal = document.getElementById('summary-total');
        const exportDataBtn = document.getElementById('export-data');
        const importDataInput = document.getElementById('import-data');
        const customCssInput = document.getElementById('custom-css-input');
        const cssFileName = document.getElementById('css-file-name');
        const removeCustomCssBtn = document.getElementById('remove-custom-css');
        const globalDiscountForm = document.getElementById('global-discount-form');
        const globalDiscountPercent = document.getElementById('global-discount-percent');
        const removeGlobalDiscountBtn = document.getElementById('remove-global-discount');
        const discountedProductsList = document.getElementById('discounted-products-list');
        const productDiscountInput = document.getElementById('product-discount');
        const productCurrencySelect = document.getElementById('product-currency');
        const productPriceInput = document.getElementById('product-price');
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        const currentCurrencyDisplay = document.getElementById('current-currency-display');
        const currentCurrencyName = document.getElementById('currency-name');
        const currencyRate = document.getElementById('currency-rate');
        const baseCurrencySelector = document.getElementById('base-currency-selector');
        const saveBaseCurrencyBtn = document.getElementById('save-base-currency');
        const exchangeRatesDisplay = document.getElementById('exchange-rates-display');
        const updateExchangeRatesBtn = document.getElementById('update-exchange-rates');
        const convertFromInput = document.getElementById('convert-from');
        const convertFromCurrency = document.getElementById('convert-from-currency');
        const convertToInput = document.getElementById('convert-to');
        const convertToCurrency = document.getElementById('convert-to-currency');
        const convertCurrencyBtn = document.getElementById('convert-currency');
        const autoGeolocationCheckbox = document.getElementById('auto-geolocation');
        const geolocationStatus = document.getElementById('geolocation-status');
        const summaryCurrency = document.getElementById('summary-currency');
        const discountCurrency = document.getElementById('discount-currency');
        const totalCurrency = document.getElementById('total-currency');
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        const totalProductsElement = document.getElementById('total-products');
        const soldProductsElement = document.getElementById('sold-products');
        const totalCategoriesElement = document.getElementById('total-categories');
        const totalMessagesElement = document.getElementById('total-messages');
        const totalOrdersElement = document.getElementById('total-orders');
        const activeUsersElement = document.getElementById('active-users');
        const recentProductsElement = document.getElementById('recent-products');
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ù„Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
        let floatingImageInterval;
        let floatingImageVisible = false;
        let currentAnimationDirection = 'random';
        let isEditingProduct = false;
        let editingProductId = null;
        
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
        function extractPrice(priceText) {
            const priceMatch = priceText.match(/[\d\.]+/);
            return priceMatch ? parseFloat(priceMatch[0]) : 0;
        }
        
        function formatPrice(price, currencyCode = userCurrency) {
            const currency = currencies[currencyCode];
            if (!currency) return `${price.toFixed(2)} ${currencyCode}`;
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø³Ø¹Ø± Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            const convertedPrice = convertCurrency(price, baseCurrency, currencyCode);
            return `${convertedPrice.toFixed(2)} ${currency.symbol}`;
        }
        
        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª
        function convertCurrency(amount, fromCurrency, toCurrency) {
            if (fromCurrency === toCurrency) return amount;
            
            // Ø£ÙˆÙ„Ø§Ù‹ ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (YER)
            let amountInBase;
            if (fromCurrency === 'YER') {
                amountInBase = amount;
            } else {
                amountInBase = amount / currencies[fromCurrency].exchangeRate;
            }
            
            // Ø«Ù… ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            if (toCurrency === 'YER') {
                return amountInBase;
            } else {
                return amountInBase * currencies[toCurrency].exchangeRate;
            }
        }
        
        function calculateProductPrice(product) {
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø®Ø²Ù†Ø©
            let basePrice = product.basePrice || extractPrice(product.price);
            let priceCurrency = product.currency || baseCurrency;
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø³Ø¹Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (YER) Ù„Ù„ØªØ®Ø²ÙŠÙ†
            if (priceCurrency !== 'YER') {
                basePrice = convertCurrency(basePrice, priceCurrency, 'YER');
            }
            
            let discount = 0;
            let originalPrice = basePrice;
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø®ØµÙ… Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
            if (product.discount && product.discount > 0) {
                discount += (basePrice * product.discount / 100);
                basePrice = basePrice - discount;
            }
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø¹Ø§Ù…
            if (globalDiscount > 0) {
                const globalDiscountAmount = originalPrice * globalDiscount / 100;
                discount += globalDiscountAmount;
                basePrice = basePrice - globalDiscountAmount;
            }
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¥Ù„Ù‰ Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø¹Ø±Ø¶
            const displayPrice = convertCurrency(basePrice, 'YER', userCurrency);
            const displayOriginal = convertCurrency(originalPrice, 'YER', userCurrency);
            const displayDiscount = convertCurrency(discount, 'YER', userCurrency);
            
            return {
                original: originalPrice, // ÙÙŠ YER Ù„Ù„ØªØ®Ø²ÙŠÙ†
                displayOriginal: displayOriginal, // ÙÙŠ Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø¹Ø±Ø¶
                discounted: Math.max(0, basePrice), // ÙÙŠ YER Ù„Ù„ØªØ®Ø²ÙŠÙ†
                displayDiscounted: displayPrice, // ÙÙŠ Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø¹Ø±Ø¶
                discount: discount, // ÙÙŠ YER Ù„Ù„ØªØ®Ø²ÙŠÙ†
                displayDiscount: displayDiscount, // ÙÙŠ Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø¹Ø±Ø¶
                hasDiscount: discount > 0
            };
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function updateUI() {
            cartCount.textContent = cart.length;
            modalCartCount.textContent = `${cart.length} Ù…Ù†ØªØ¬`;
            renderCategories();
            
            if (currentSection === 'products') {
                productsGallery.style.display = 'grid';
                messagesSection.style.display = 'none';
                renderProducts();
            } else if (currentSection === 'messages') {
                productsGallery.style.display = 'none';
                messagesSection.style.display = 'block';
                renderMessages();
            }
            
            updateCategoryOptions();
            renderCategoriesList();
            renderAdminMessagesList();
            renderColorPickers();
            applySavedMedia();
            renderAdminProductsList();
            updateStats();
            renderDiscountedProductsList();
            updateCurrencyDisplay();
            renderCurrencyOptions();
            updateExchangeRatesDisplay();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø¹Ø§Ù… ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            globalDiscountPercent.value = globalDiscount;
            
            if (isAdmin) {
                adminPanel.style.display = 'block';
                adminIndicator.style.display = 'block';
                adminLogin.textContent = 'Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…Ø¯ÙŠØ±';
                document.querySelectorAll('.remove-product, .mark-as-sold').forEach(btn => {
                    btn.style.display = 'block';
                });
            } else {
                adminPanel.style.display = 'none';
                adminIndicator.style.display = 'none';
                adminLogin.textContent = 'Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±';
                document.querySelectorAll('.remove-product, .mark-as-sold').forEach(btn => {
                    btn.style.display = 'none';
                });
            }
            
            applySavedColors();
            applySavedSiteName();
            
            // ØªØ­Ø¯ÙŠØ« Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            whatsappNumberInput.value = whatsappNumber;
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨
            welcomeSiteName.textContent = siteNameElement.textContent;
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø²Ø± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
            updateFloatingImageToggle();
            
            // ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ©
            autoGeolocationCheckbox.checked = autoGeolocation;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
            if (!localStorage.getItem('extension_welcome_shown')) {
                setTimeout(() => {
                    welcomeModal.style.display = 'flex';
                }, 500);
            }
            
            // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹
            if (autoGeolocation && !userCountry) {
                detectUserLocation();
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø©
        function updateCurrencyDisplay() {
            const currency = currencies[userCurrency];
            currentCurrencyName.textContent = `${currency.name} (${currency.symbol})`;
            
            // Ø­Ø³Ø§Ø¨ Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
            const exchangeRate = currency.exchangeRate;
            const baseCurrencyName = currencies[baseCurrency].name;
            
            if (userCurrency === baseCurrency) {
                currencyRate.textContent = `Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©: ${baseCurrencyName}`;
            } else {
                const rateText = `1 ${currency.symbol} = ${(1/exchangeRate).toFixed(2)} ${currencies[baseCurrency].symbol}`;
                currencyRate.textContent = `Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù: ${rateText}`;
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø±Ù…ÙˆØ² Ø§Ù„Ø¹Ù…Ù„Ø© ÙÙŠ Ø§Ù„Ø³Ù„Ø©
            summaryCurrency.textContent = currency.symbol;
            discountCurrency.textContent = currency.symbol;
            totalCurrency.textContent = currency.symbol;
        }
        
        // Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø©
        function renderCurrencyOptions() {
            const currencyOptions = baseCurrencySelector.querySelectorAll('.currency-option');
            currencyOptions.forEach(option => {
                const currencyCode = option.dataset.currency;
                if (currencyCode === baseCurrency) {
                    option.classList.add('active');
                } else {
                    option.classList.remove('active');
                }
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù
        function updateExchangeRatesDisplay() {
            let html = '<div style="display: grid; gap: 10px;">';
            
            Object.values(currencies).forEach(currency => {
                if (currency.code === baseCurrency) {
                    html += `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; background: var(--medium-bg); border-radius: 5px;">
                            <div>
                                <strong>${currency.flag} ${currency.name} (${currency.symbol})</strong>
                                <div style="font-size: 0.8rem; color: var(--accent-color);">Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 1.2rem; font-weight: bold;">1.00</div>
                            </div>
                        </div>
                    `;
                } else {
                    const rateFromBase = (1 / currency.exchangeRate).toFixed(2);
                    const rateToBase = currency.exchangeRate.toFixed(4);
                    
                    html += `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; background: var(--medium-bg); border-radius: 5px;">
                            <div>
                                <strong>${currency.flag} ${currency.name} (${currency.symbol})</strong>
                                <div style="font-size: 0.8rem; color: #999;">${currency.country}</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 1.2rem; font-weight: bold;">${rateFromBase}</div>
                                <div style="font-size: 0.8rem; color: #999;">1 ${currency.symbol} = ${rateToBase} ${currencies[baseCurrency].symbol}</div>
                            </div>
                        </div>
                    `;
                }
            });
            
            html += '</div>';
            exchangeRatesDisplay.innerHTML = html;
        }
        
        // Ø§ÙƒØªØ´Ø§Ù Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function detectUserLocation() {
            geolocationStatus.innerHTML = '<p>Ø¬Ø§Ø±ÙŠ Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ...</p>';
            
            if (!navigator.geolocation) {
                geolocationStatus.innerHTML = '<p style="color: var(--error-color);">Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</p>';
                return;
            }
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† IP ÙƒØ¨Ø¯ÙŠÙ„
            fetch('https://ipapi.co/json/')
                .then(response => response.json())
                .then(data => {
                    userCountry = data.country_code;
                    localStorage.setItem('extension_user_country', userCountry);
                    
                    // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ù„Ø¯
                    let detectedCurrency = 'YER'; // Ø§ÙØªØ±Ø§Ø¶ÙŠ
                    
                    if (userCountry === 'SA' || userCountry === 'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©') {
                        detectedCurrency = 'SAR';
                    } else if (userCountry === 'US' || userCountry === 'Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©') {
                        detectedCurrency = 'USD';
                    } else if (userCountry === 'YE' || userCountry === 'Ø§Ù„ÙŠÙ…Ù†') {
                        detectedCurrency = 'YER';
                    }
                    
                    // ØªØ­Ø¯ÙŠØ« Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø®ØªÙ„ÙØ©
                    if (detectedCurrency !== userCurrency) {
                        userCurrency = detectedCurrency;
                        localStorage.setItem('extension_user_currency', userCurrency);
                        updateCurrencyDisplay();
                        renderProducts();
                        showNotification(`ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù…ÙˆÙ‚Ø¹Ùƒ: ${data.country_name} - ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø© Ø¥Ù„Ù‰ ${currencies[userCurrency].name}`);
                    }
                    
                    geolocationStatus.innerHTML = `
                        <p style="color: var(--accent-color);">âœ… ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­</p>
                        <p style="font-size: 0.9rem; margin-top: 5px;">
                            Ø§Ù„Ø¨Ù„Ø¯: ${data.country_name} (${userCountry})<br>
                            Ø§Ù„Ø¹Ù…Ù„Ø©: ${currencies[userCurrency].name}
                        </p>
                    `;
                })
                .catch(error => {
                    console.error('Error detecting location:', error);
                    geolocationStatus.innerHTML = '<p style="color: var(--error-color);">ÙØ´Ù„ ÙÙŠ Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</p>';
                });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            totalProductsElement.textContent = products.length;
            soldProductsElement.textContent = products.filter(p => p.sold).length;
            totalCategoriesElement.textContent = categories.length;
            totalMessagesElement.textContent = messages.length;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ© (ØªØ®Ù…ÙŠÙ†ÙŠ - ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ†Ù‡)
            const totalOrders = parseInt(localStorage.getItem('extension_total_orders') || '0');
            totalOrdersElement.textContent = totalOrders;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ† (ØªØ®Ù…ÙŠÙ†ÙŠ - ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ†Ù‡)
            activeUsersElement.textContent = Math.min(products.length * 2, 100);
            
            // Ø¹Ø±Ø¶ Ø¢Ø®Ø± 5 Ù…Ù†ØªØ¬Ø§Øª
            renderRecentProducts();
        }
        
        // Ø¹Ø±Ø¶ Ø¢Ø®Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        function renderRecentProducts() {
            const recent = [...products]
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            recentProductsElement.innerHTML = '';
            
            recent.forEach(product => {
                const productPrice = calculateProductPrice(product);
                const productElement = document.createElement('div');
                productElement.className = 'message-item';
                productElement.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <img src="${product.image}" alt="${product.title}" style="width: 40px; height: 40px; object-fit: cover; border-radius: 4px;">
                        <div>
                            <strong>${product.title}</strong>
                            <div style="font-size: 0.8rem; color: #999;">
                                ${formatPrice(productPrice.displayDiscounted)} - ${new Date(product.createdAt).toLocaleDateString('ar-SA')}
                            </div>
                        </div>
                    </div>
                `;
                recentProductsElement.appendChild(productElement);
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø²Ø± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
        function updateFloatingImageToggle() {
            const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
            if (savedMedia.floatingImage) {
                floatingImageToggle.classList.remove('hidden');
            } else {
                floatingImageToggle.classList.add('hidden');
            }
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function applySavedColors() {
            const savedColors = JSON.parse(localStorage.getItem('extension_colors')) || {};
            for (const [key, value] of Object.entries(savedColors)) {
                document.documentElement.style.setProperty(`--${key}`, value);
            }
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ³Ø§Ø¦Ø· Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function applySavedMedia() {
            const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
            
            if (savedMedia.mobileVideo) {
                bannerVideo.src = savedMedia.mobileVideo;
                mobileVideoBanner.style.display = 'block';
            } else {
                mobileVideoBanner.style.display = 'none';
            }
            
            if (savedMedia.floatingImage) {
                floatingImage.src = savedMedia.floatingImage;
                floatingImage.style.display = 'block';
                floatingImageVisible = true;
                startFloatingAnimation();
            } else {
                floatingImage.style.display = 'none';
                floatingImageVisible = false;
                stopFloatingAnimation();
            }
            
            if (savedMedia.backgroundImage) {
                document.body.style.backgroundImage = `url(${savedMedia.backgroundImage})`;
            } else {
                document.body.style.backgroundImage = 'none';
            }
            
            if (savedMedia.animationSpeed) animationSpeed.value = savedMedia.animationSpeed;
            if (savedMedia.animationDirection) {
                animationDirection.value = savedMedia.animationDirection;
                currentAnimationDirection = savedMedia.animationDirection;
            }
            
            // ØªØ·Ø¨ÙŠÙ‚ CSS Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ
            if (savedMedia.customCss) {
                applyCustomCss(savedMedia.customCss);
            }
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ CSS Ù…Ø®ØµØµ
        function applyCustomCss(cssText) {
            let customStyle = document.getElementById('custom-css-style');
            if (!customStyle) {
                customStyle = document.createElement('style');
                customStyle.id = 'custom-css-style';
                document.head.appendChild(customStyle);
            }
            customStyle.textContent = cssText;
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸
        function applySavedSiteName() {
            const savedSiteName = localStorage.getItem('extension_site_name');
            if (savedSiteName) {
                siteNameElement.textContent = savedSiteName;
                siteTitleElement.textContent = `${savedSiteName} - Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ`;
            }
        }
        
        // Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù†
        function renderColorPickers() {
            const colorPickers = {
                'bg-color-picker': ['dark-bg', 'medium-bg', 'light-bg'],
                'primary-color-picker': ['primary-color', 'secondary-color', 'accent-color'],
                'text-color-picker': ['text-color'],
                'button-color-picker': ['button-color'],
                'cart-color-picker': ['cart-color']
            };
            
            for (const [pickerId, colorTypes] of Object.entries(colorPickers)) {
                const picker = document.getElementById(pickerId);
                picker.innerHTML = '';
                
                colorPalette.forEach(colorObj => {
                    const colorOption = document.createElement('div');
                    colorOption.className = 'color-option';
                    colorOption.style.backgroundColor = colorObj.color;
                    colorOption.setAttribute('data-color', colorObj.color);
                    colorOption.setAttribute('data-type', colorTypes[0]);
                    colorOption.title = colorObj.name;
                    
                    const savedColors = JSON.parse(localStorage.getItem('extension_colors')) || {};
                    const currentColor = savedColors[colorTypes[0]];
                    if (currentColor === colorObj.color) {
                        colorOption.classList.add('active');
                    }
                    
                    picker.appendChild(colorOption);
                });
            }
        }
        
        // Ø¨Ø¯Ø¡ Ø­Ø±ÙƒØ© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
        function startFloatingAnimation() {
            stopFloatingAnimation();
            
            let posX = Math.random() * (window.innerWidth - 80);
            let posY = Math.random() * (window.innerHeight - 80);
            let speedX = (Math.random() - 0.5) * animationSpeed.value;
            let speedY = (Math.random() - 0.5) * animationSpeed.value;
            let angle = 0;
            let radius = 100;
            
            floatingImageInterval = setInterval(() => {
                if (currentAnimationDirection === 'random') {
                    posX += speedX;
                    posY += speedY;
                    if (posX <= 0 || posX >= window.innerWidth - 80) speedX = -speedX;
                    if (posY <= 0 || posY >= window.innerHeight - 80) speedY = -speedY;
                } 
                else if (currentAnimationDirection === 'horizontal') {
                    posX += speedX;
                    if (posX <= 0 || posX >= window.innerWidth - 80) speedX = -speedX;
                } 
                else if (currentAnimationDirection === 'vertical') {
                    posY += speedY;
                    if (posY <= 0 || posY >= window.innerHeight - 80) speedY = -speedY;
                } 
                else if (currentAnimationDirection === 'circular') {
                    angle += 0.02 * animationSpeed.value;
                    posX = window.innerWidth / 2 + Math.cos(angle) * radius - 40;
                    posY = window.innerHeight / 2 + Math.sin(angle) * radius - 40;
                }
                
                floatingImage.style.left = `${posX}px`;
                floatingImage.style.top = `${posY}px`;
            }, 50);
        }
        
        // Ø¥ÙŠÙ‚Ø§Ù Ø­Ø±ÙƒØ© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
        function stopFloatingAnimation() {
            if (floatingImageInterval) {
                clearInterval(floatingImageInterval);
            }
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
        function renderCategories() {
            categoriesContainer.innerHTML = '';
            
            const allCategory = document.createElement('div');
            allCategory.className = `category ${currentCategory === 'Ø§Ù„ÙƒÙ„' ? 'active' : ''}`;
            allCategory.textContent = 'Ø§Ù„ÙƒÙ„';
            allCategory.addEventListener('click', () => {
                currentCategory = 'Ø§Ù„ÙƒÙ„';
                renderCategories();
                renderProducts();
            });
            categoriesContainer.appendChild(allCategory);
            
            categories.forEach(category => {
                const categoryElement = document.createElement('div');
                categoryElement.className = `category ${currentCategory === category ? 'active' : ''}`;
                categoryElement.textContent = category;
                categoryElement.addEventListener('click', () => {
                    currentCategory = category;
                    renderCategories();
                    renderProducts();
                });
                categoriesContainer.appendChild(categoryElement);
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙÙŠ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        function updateCategoryOptions() {
            productCategorySelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>';
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                productCategorySelect.appendChild(option);
            });
        }
        
        // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        function renderCategoriesList() {
            categoriesList.innerHTML = '';
            categories.forEach((category, index) => {
                const li = document.createElement('li');
                li.style.marginBottom = '10px';
                li.style.display = 'flex';
                li.style.justifyContent = 'space-between';
                li.style.alignItems = 'center';
                
                const span = document.createElement('span');
                span.textContent = category;
                
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Ø­Ø°Ù';
                deleteBtn.style.background = 'var(--error-color)';
                deleteBtn.style.color = 'white';
                deleteBtn.style.border = 'none';
                deleteBtn.style.padding = '5px 10px';
                deleteBtn.style.borderRadius = '4px';
                deleteBtn.style.cursor = 'pointer';
                deleteBtn.addEventListener('click', () => {
                    if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‚Ø³Ù… "${category}"ØŸ`)) {
                        categories.splice(index, 1);
                        localStorage.setItem('extension_categories', JSON.stringify(categories));
                        renderCategoriesList();
                        updateCategoryOptions();
                        showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù‚Ø³Ù…');
                    }
                });
                
                li.appendChild(span);
                li.appendChild(deleteBtn);
                categoriesList.appendChild(li);
            });
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        function renderMessages() {
            messagesContainer.innerHTML = '';
            
            if (messages.length === 0) {
                messagesContainer.innerHTML = '<p style="text-align: center; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
                return;
            }
            
            messages.forEach(message => {
                const messageElement = document.createElement('div');
                messageElement.className = 'message-item';
                messageElement.innerHTML = `
                    <div class="message-content">${message.content}</div>
                    <div class="message-date">${message.date}</div>
                `;
                messagesContainer.appendChild(messageElement);
            });
        }
        
        // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        function renderAdminMessagesList() {
            adminMessagesList.innerHTML = '';
            
            if (messages.length === 0) {
                adminMessagesList.innerHTML = '<p style="text-align: center; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
                return;
            }
            
            messages.forEach((message, index) => {
                const messageElement = document.createElement('div');
                messageElement.className = 'message-item';
                messageElement.innerHTML = `
                    <div class="message-content">${message.content}</div>
                    <div class="message-date">${message.date}</div>
                    <button class="remove-product" data-index="${index}" style="margin-top: 10px;">Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
                `;
                adminMessagesList.appendChild(messageElement);
            });
            
            document.querySelectorAll('#admin-messages-list .remove-product').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = e.target.getAttribute('data-index');
                    removeMessage(index);
                });
            });
        }
        
        // Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ©
        function filterAndSortProducts() {
            let filteredProducts = currentCategory === 'Ø§Ù„ÙƒÙ„' 
                ? [...products] 
                : products.filter(product => product.category === currentCategory);
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨Ø­Ø«
            if (searchQuery) {
                filteredProducts = filteredProducts.filter(product => 
                    product.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    product.description.toLowerCase().includes(searchQuery.toLowerCase())
                );
            }
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµÙ†ÙŠÙ
            switch (currentSort) {
                case 'price-asc':
                    filteredProducts.sort((a, b) => {
                        const priceA = calculateProductPrice(a).displayDiscounted;
                        const priceB = calculateProductPrice(b).displayDiscounted;
                        return priceA - priceB;
                    });
                    break;
                case 'price-desc':
                    filteredProducts.sort((a, b) => {
                        const priceA = calculateProductPrice(a).displayDiscounted;
                        const priceB = calculateProductPrice(b).displayDiscounted;
                        return priceB - priceA;
                    });
                    break;
                case 'newest':
                    filteredProducts.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                    break;
                default:
                    // Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ - Ø­Ø³Ø¨ ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©
                    filteredProducts.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            }
            
            return filteredProducts;
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        function renderProducts() {
            productsGallery.innerHTML = '';
            
            const filteredProducts = filterAndSortProducts();
            
            if (filteredProducts.length === 0) {
                productsGallery.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù…</p>';
                return;
            }
            
            filteredProducts.forEach((product) => {
                const productPrice = calculateProductPrice(product);
                
                const productElement = document.createElement('div');
                productElement.className = `product ${product.sold ? 'sold' : ''}`;
                productElement.innerHTML = `
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.title}">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.title}</h3>
                        <p class="product-price">
                            ${formatPrice(productPrice.displayDiscounted)}
                            ${productPrice.hasDiscount ? `<span class="discount-badge">Ø®ØµÙ…</span>` : ''}
                            ${productPrice.hasDiscount ? `<span class="original-price">${formatPrice(productPrice.displayOriginal)}</span>` : ''}
                        </p>
                        <p class="product-description">${product.description}</p>
                        <div class="product-actions">
                            <button class="add-to-cart" data-id="${product.id}" ${product.sold ? 'disabled style="opacity: 0.5;"' : ''}>
                                ${product.sold ? 'ØªÙ… Ø§Ù„Ø¨ÙŠØ¹' : 'Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©'}
                                <span class="cart-icon-btn">ğŸ›’</span>
                            </button>
                            <button class="remove-product" data-id="${product.id}">Ø­Ø°Ù</button>
                            <button class="mark-as-sold" data-id="${product.id}">${product.sold ? 'Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¨ÙŠØ¹' : 'ØªÙ… Ø§Ù„Ø¨ÙŠØ¹'}</button>
                        </div>
                    </div>
                `;
                productsGallery.appendChild(productElement);
            });
            
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.target.closest('.add-to-cart').getAttribute('data-id');
                    addToCart(productId);
                });
            });
            
            document.querySelectorAll('.remove-product').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.target.getAttribute('data-id');
                    removeProduct(productId);
                });
            });
            
            document.querySelectorAll('.mark-as-sold').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.target.getAttribute('data-id');
                    toggleSoldStatus(productId);
                });
            });
            
            document.querySelectorAll('.product-image img').forEach(img => {
                img.addEventListener('click', (e) => {
                    expandedImage.src = e.target.src;
                    imageModal.style.display = 'flex';
                });
            });
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø®ÙØ¶Ø©
        function renderDiscountedProductsList() {
            discountedProductsList.innerHTML = '';
            
            const discountedProducts = products.filter(p => p.discount && p.discount > 0);
            
            if (discountedProducts.length === 0) {
                discountedProductsList.innerHTML = '<p style="text-align: center; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø®ÙØ¶Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
                return;
            }
            
            discountedProducts.forEach(product => {
                const productElement = document.createElement('div');
                productElement.className = 'message-item';
                productElement.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <img src="${product.image}" alt="${product.title}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 4px;">
                        <div style="flex-grow: 1;">
                            <h4>${product.title}</h4>
                            <p>Ø®ØµÙ…: ${product.discount}% - ${product.category}</p>
                            <div style="display: flex; gap: 10px; margin-top: 5px;">
                                <input type="number" class="update-discount" data-id="${product.id}" value="${product.discount}" min="0" max="100" style="width: 80px; padding: 5px;">
                                <button class="update-product-discount" data-id="${product.id}">ØªØ­Ø¯ÙŠØ«</button>
                                <button class="remove-product-discount" data-id="${product.id}" style="background: var(--error-color); color: white; border: none; padding: 5px 10px; border-radius: 4px;">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®ØµÙ…</button>
                            </div>
                        </div>
                    </div>
                `;
                discountedProductsList.appendChild(productElement);
            });
            
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª
            document.querySelectorAll('.update-product-discount').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.target.getAttribute('data-id');
                    const discountInput = document.querySelector(`.update-discount[data-id="${productId}"]`);
                    const discountValue = parseInt(discountInput.value);
                    
                    if (discountValue >= 0 && discountValue <= 100) {
                        updateProductDiscount(productId, discountValue);
                    } else {
                        alert('Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¨ÙŠÙ† 0 Ùˆ 100');
                    }
                });
            });
            
            document.querySelectorAll('.remove-product-discount').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.target.getAttribute('data-id');
                    updateProductDiscount(productId, 0);
                });
            });
        }

        // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        function renderAdminProductsList() {
            adminProductsList.innerHTML = '';
            
            products.forEach((product, index) => {
                const productPrice = calculateProductPrice(product);
                const productElement = document.createElement('div');
                productElement.className = 'message-item';
                productElement.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <img src="${product.image}" alt="${product.title}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 4px;">
                        <div style="flex-grow: 1;">
                            <h4>${product.title}</h4>
                            <p>${formatPrice(productPrice.displayDiscounted)} ${product.discount ? `(Ø®ØµÙ…: ${product.discount}%)` : ''} - ${product.category}</p>
                            <p style="font-size: 0.8rem; color: #999;">${product.description}</p>
                        </div>
                    </div>
                    <div style="margin-top: 10px; display: flex; gap: 10px;">
                        <button class="edit-product" data-id="${product.id}">ØªØ¹Ø¯ÙŠÙ„</button>
                        <button class="remove-product" data-id="${product.id}">Ø­Ø°Ù</button>
                        <button class="mark-as-sold" data-id="${product.id}">${product.sold ? 'Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¨ÙŠØ¹' : 'ØªÙ… Ø§Ù„Ø¨ÙŠØ¹'}</button>
                    </div>
                `;
                adminProductsList.appendChild(productElement);
            });

            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„ØªØ¹Ø¯ÙŠÙ„
            document.querySelectorAll('.edit-product').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.target.getAttribute('data-id');
                    editProduct(productId);
                });
            });
        }

        // ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬
        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            document.getElementById('product-title').value = product.title;
            document.getElementById('product-price').value = product.basePrice || extractPrice(product.price);
            document.getElementById('product-discount').value = product.discount || '';
            document.getElementById('product-currency').value = product.currency || baseCurrency;
            document.getElementById('product-category').value = product.category;
            document.getElementById('product-description').value = product.description;
            
            // ØªØºÙŠÙŠØ± Ù†Øµ Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ©
            productSubmitBtn.textContent = 'ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬';
            productSubmitBtn.dataset.editId = productId;
            isEditingProduct = true;
            editingProductId = productId;
            
            fileNameSpan.textContent = 'Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©';
            
            // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            document.getElementById('admin-products').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            
            if (!product || product.sold) {
                alert('Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªØ§Ø­ Ø£Ùˆ ØªÙ… Ø¨ÙŠØ¹Ù‡');
                return;
            }
            
            cart.push(product);
            localStorage.setItem('extension_cart', JSON.stringify(cart));
            updateUI();
            showNotification('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©');
        }
        
        // Ø¥Ø²Ø§Ù„Ø© Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©
        function removeFromCart(index) {
            cart.splice(index, 1);
            localStorage.setItem('extension_cart', JSON.stringify(cart));
            updateCartModal();
            updateUI();
            showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©');
        }
        
        // Ø¥Ø²Ø§Ù„Ø© Ù…Ù†ØªØ¬
        function removeProduct(productId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ')) {
                const index = products.findIndex(p => p.id === productId);
                if (index !== -1) {
                    products.splice(index, 1);
                    localStorage.setItem('extension_products', JSON.stringify(products));
                    updateUI();
                    showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬');
                }
            }
        }
        
        // Ø¥Ø²Ø§Ù„Ø© Ø±Ø³Ø§Ù„Ø©
        function removeMessage(index) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŸ')) {
                messages.splice(index, 1);
                localStorage.setItem('extension_messages', JSON.stringify(messages));
                renderAdminMessagesList();
                renderMessages();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø©');
            }
        }
        
        // ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ø¨ÙŠØ¹
        function toggleSoldStatus(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                product.sold = !product.sold;
                localStorage.setItem('extension_products', JSON.stringify(products));
                updateUI();
                showNotification(product.sold ? 'ØªÙ…æ ‡è®° Ø§Ù„Ù…Ù†ØªØ¬ ÙƒÙ…Ø¨Ø§Ø¹' : 'ØªÙ… Ø¥Ù„ØºØ§Ø¡æ ‡è®° Ø§Ù„Ù…Ù†ØªØ¬ ÙƒÙ…Ø¨Ø§Ø¹');
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø®ØµÙ… Ù…Ù†ØªØ¬
        function updateProductDiscount(productId, discount) {
            const product = products.find(p => p.id === productId);
            if (product) {
                product.discount = discount;
                localStorage.setItem('extension_products', JSON.stringify(products));
                updateUI();
                showNotification(discount > 0 ? `ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®ØµÙ… Ø¥Ù„Ù‰ ${discount}%` : 'ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®ØµÙ…');
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« modal Ø§Ù„Ø³Ù„Ø©
        function updateCartModal() {
            cartItemsContainer.innerHTML = '';
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="empty-cart-message">
                        <i class="fas fa-shopping-cart"></i>
                        <h3>Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©</h3>
                        <p>Ø£Ø¶Ù Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„ØªØ¨Ø¯Ø£ Ø§Ù„ØªØ³ÙˆÙ‚</p>
                    </div>
                `;
                summaryCount.textContent = '0';
                summarySubtotal.textContent = `0 ${currencies[userCurrency].symbol}`;
                summaryDiscount.textContent = `0 ${currencies[userCurrency].symbol}`;
                summaryTotal.textContent = `0 ${currencies[userCurrency].symbol}`;
                return;
            }
            
            let subtotal = 0;
            let totalDiscount = 0;
            
            cart.forEach((item, index) => {
                const itemPrice = calculateProductPrice(item);
                subtotal += itemPrice.displayOriginal;
                totalDiscount += itemPrice.displayDiscount;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.title}">
                    <div class="cart-item-info">
                        <div class="cart-item-title">${item.title}</div>
                        <div class="cart-item-price">
                            ${formatPrice(itemPrice.displayDiscounted)}
                            ${itemPrice.hasDiscount ? `<span class="discount-badge">-${Math.round((itemPrice.discount/itemPrice.original)*100)}%</span>` : ''}
                        </div>
                        <div class="cart-item-category">${item.category}</div>
                    </div>
                    <button class="remove-from-cart" data-index="${index}" title="Ø­Ø°Ù Ù…Ù† Ø§Ù„Ø³Ù„Ø©">Ã—</button>
                `;
                cartItemsContainer.appendChild(cartItem);
            });
            
            const total = subtotal - totalDiscount;
            
            summaryCount.textContent = cart.length;
            summarySubtotal.textContent = `${subtotal.toFixed(2)} ${currencies[userCurrency].symbol}`;
            summaryDiscount.textContent = `${totalDiscount.toFixed(2)} ${currencies[userCurrency].symbol}`;
            summaryTotal.textContent = `${total.toFixed(2)} ${currencies[userCurrency].symbol}`;
            
            document.querySelectorAll('.remove-from-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = e.target.getAttribute('data-index');
                    removeFromCart(index);
                });
            });
        }
        
        // Ø¥Ø¶Ø§ÙØ©/ØªØ­Ø¯ÙŠØ« Ù…Ù†ØªØ¬
        function addOrUpdateProduct(e) {
            e.preventDefault();
            
            const title = document.getElementById('product-title').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const currency = document.getElementById('product-currency').value;
            const discount = parseInt(document.getElementById('product-discount').value) || 0;
            const category = document.getElementById('product-category').value;
            const description = document.getElementById('product-description').value;
            const imageFile = productImageInput.files[0];
            
            if (!category) {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù‚Ø³Ù… Ù„Ù„Ù…Ù†ØªØ¬');
                return;
            }
            
            if (price <= 0) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ­ÙŠØ­ Ù„Ù„Ù…Ù†ØªØ¬');
                return;
            }
            
            if (isEditingProduct && editingProductId) {
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø­Ø§Ù„ÙŠ
                const productIndex = products.findIndex(p => p.id === editingProductId);
                if (productIndex !== -1) {
                    if (imageFile) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            products[productIndex] = {
                                ...products[productIndex],
                                title,
                                basePrice: price,
                                currency,
                                discount,
                                category,
                                description,
                                price: `${price} ${currencies[currency].symbol}`,
                                image: e.target.result
                            };
                            localStorage.setItem('extension_products', JSON.stringify(products));
                            resetProductForm();
                            updateUI();
                            showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');
                        };
                        reader.readAsDataURL(imageFile);
                    } else {
                        products[productIndex] = {
                            ...products[productIndex],
                            title,
                            basePrice: price,
                            currency,
                            discount,
                            category,
                            description,
                            price: `${price} ${currencies[currency].symbol}`
                        };
                        localStorage.setItem('extension_products', JSON.stringify(products));
                        resetProductForm();
                        updateUI();
                        showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');
                    }
                }
            } else {
                // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
                if (!imageFile) {
                    alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ù„Ù„Ù…Ù†ØªØ¬');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newProduct = {
                        id: Date.now().toString(),
                        title,
                        basePrice: price,
                        currency,
                        discount,
                        category,
                        description,
                        price: `${price} ${currencies[currency].symbol}`,
                        image: e.target.result,
                        sold: false,
                        createdAt: new Date().toISOString()
                    };
                    
                    products.push(newProduct);
                    localStorage.setItem('extension_products', JSON.stringify(products));
                    
                    resetProductForm();
                    updateUI();
                    showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');
                };
                reader.readAsDataURL(imageFile);
            }
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ù†ØªØ¬
        function resetProductForm() {
            addProductForm.reset();
            fileNameSpan.textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©';
            productSubmitBtn.textContent = 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬';
            productSubmitBtn.removeAttribute('data-edit-id');
            isEditingProduct = false;
            editingProductId = null;
            // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            productCurrencySelect.value = baseCurrency;
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯
        function addNewCategory(e) {
            e.preventDefault();
            
            const name = document.getElementById('category-name').value;
            
            if (categories.includes(name)) {
                alert('Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');
                return;
            }
            
            categories.push(name);
            localStorage.setItem('extension_categories', JSON.stringify(categories));
            
            document.getElementById('category-name').value = '';
            updateUI();
            showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø³Ù… Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function addNewMessage(e) {
            e.preventDefault();
            
            const content = document.getElementById('message-content').value;
            const date = new Date().toLocaleDateString('ar-SA');
            
            const newMessage = {
                content,
                date
            };
            
            messages.push(newMessage);
            localStorage.setItem('extension_messages', JSON.stringify(messages));
            
            addMessageForm.reset();
            renderAdminMessagesList();
            renderMessages();
            showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­');
        }

        // ØªØºÙŠÙŠØ± Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨
        function changeWhatsappNumber(e) {
            e.preventDefault();
            
            const newNumber = whatsappNumberInput.value.trim();
            
            if (!newNumber) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨');
                return;
            }
            
            whatsappNumber = newNumber;
            localStorage.setItem('extension_whatsapp', whatsappNumber);
            showNotification('ØªÙ… ØªØºÙŠÙŠØ± Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        function changePassword(e) {
            e.preventDefault();
            
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            
            if (currentPassword !== adminPassword) {
                alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                return;
            }
            
            adminPassword = newPassword;
            localStorage.setItem('extension_password', adminPassword);
            changePasswordForm.reset();
            showNotification('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹
        function changeSiteName(e) {
            e.preventDefault();
            
            const newName = newSiteNameInput.value;
            if (!newName.trim()) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…ÙˆÙ‚Ø¹');
                return;
            }
            
            siteNameElement.textContent = newName;
            siteTitleElement.textContent = `${newName} - Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ`;
            localStorage.setItem('extension_site_name', newName);
            changeSiteNameForm.reset();
            showNotification('ØªÙ… ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        function changeBaseCurrency() {
            const selectedOption = baseCurrencySelector.querySelector('.currency-option.active');
            if (selectedOption) {
                const newCurrency = selectedOption.dataset.currency;
                if (newCurrency !== baseCurrency) {
                    baseCurrency = newCurrency;
                    localStorage.setItem('extension_base_currency', baseCurrency);
                    
                    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‡ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©ØŒ Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ«Ù‡Ø§
                    if (userCurrency !== baseCurrency && !autoGeolocation) {
                        userCurrency = baseCurrency;
                        localStorage.setItem('extension_user_currency', userCurrency);
                    }
                    
                    updateCurrencyDisplay();
                    updateExchangeRatesDisplay();
                    renderProducts();
                    showNotification(`ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¥Ù„Ù‰ ${currencies[baseCurrency].name}`);
                }
            }
        }
        
        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹
        function convertCurrencyManual() {
            const amount = parseFloat(convertFromInput.value);
            const fromCurrency = convertFromCurrency.value;
            const toCurrency = convertToCurrency.value;
            
            if (!amount || amount <= 0) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');
                return;
            }
            
            const convertedAmount = convertCurrency(amount, fromCurrency, toCurrency);
            convertToInput.value = convertedAmount.toFixed(2);
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø¹Ø§Ù…
        function applyGlobalDiscount(e) {
            e.preventDefault();
            
            const discount = parseInt(globalDiscountPercent.value) || 0;
            
            if (discount < 0 || discount > 100) {
                alert('Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¨ÙŠÙ† 0 Ùˆ 100');
                return;
            }
            
            globalDiscount = discount;
            localStorage.setItem('extension_global_discount', JSON.stringify(globalDiscount));
            updateUI();
            showNotification(discount > 0 ? `ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø®ØµÙ… Ø¹Ø§Ù… Ø¨Ù†Ø³Ø¨Ø© ${discount}%` : 'ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø¹Ø§Ù…');
        }
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø¹Ø§Ù…
        function removeGlobalDiscount() {
            globalDiscount = 0;
            localStorage.setItem('extension_global_discount', JSON.stringify(globalDiscount));
            updateUI();
            showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø¹Ø§Ù…');
        }
        
        // ØªØºÙŠÙŠØ± Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ©
        function toggleGeolocation() {
            autoGeolocation = autoGeolocationCheckbox.checked;
            localStorage.setItem('extension_auto_geolocation', autoGeolocation);
            
            if (autoGeolocation) {
                detectUserLocation();
                showNotification('ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ');
            } else {
                showNotification('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ');
            }
        }
        
        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±
        function toggleAdmin() {
            if (isAdmin) {
                isAdmin = false;
                localStorage.setItem('extension_admin', 'false');
            } else {
                const password = prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©:');
                if (password === adminPassword) {
                    isAdmin = true;
                    localStorage.setItem('extension_admin', 'true');
                } else {
                    alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                }
            }
            updateUI();
        }
        
        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡
        function handlePurchase() {
            updateCartModal();
            purchaseModal.style.display = 'flex';
        }
        
        // ØªØ£ÙƒÙŠØ¯ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
        function confirmPurchase() {
            if (cart.length === 0) {
                alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©');
                return;
            }
            
            let message = `ğŸ‰ *Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù…Ù† Ù…ØªØ¬Ø± Ø§Ù…ØªØ¯Ø§Ø¯:*\n\n`;
            let subtotal = 0;
            let totalDiscount = 0;
            
            cart.forEach((item, index) => {
                const itemPrice = calculateProductPrice(item);
                subtotal += itemPrice.displayOriginal;
                totalDiscount += itemPrice.displayDiscount;
                
                message += `*${index + 1}. ${item.title}*\n`;
                message += `   ğŸ“¦ Ø§Ù„Ù‚Ø³Ù…: ${item.category}\n`;
                message += `   ğŸ’° Ø§Ù„Ø³Ø¹Ø±: ${formatPrice(itemPrice.displayDiscounted)}`;
                
                if (itemPrice.hasDiscount) {
                    const discountPercent = Math.round((itemPrice.discount/itemPrice.original)*100);
                    message += ` (Ø®ØµÙ… ${discountPercent}%)`;
                }
                
                message += `\n   ğŸ“ Ø§Ù„ÙˆØµÙ: ${item.description}\n\n`;
            });
            
            const total = subtotal - totalDiscount;
            
            message += `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n`;
            message += `ğŸ“Š *Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨:*\n`;
            message += `   Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${cart.length}\n`;
            message += `   Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø¬Ø²Ø¦ÙŠ: ${subtotal.toFixed(2)} ${currencies[userCurrency].symbol}\n`;
            message += `   Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª: ${totalDiscount.toFixed(2)} ${currencies[userCurrency].symbol}\n`;
            message += `   *Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total.toFixed(2)} ${currencies[userCurrency].symbol}*\n\n`;
            message += `ğŸ’° *Ø§Ù„Ø¹Ù…Ù„Ø©: ${currencies[userCurrency].name}*\n`;
            message += `ğŸ”— *Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ØªØ¬Ø±:*\n`;
            message += window.location.href + `\n\n`;
            message += `ğŸ’¬ *Ø£Ø±Ø¬Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ Ù„Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡*\n`;
            message += `Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ…! ğŸ›ï¸`;
            
            // ØªØ±Ù…ÙŠØ² Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø±Ø§Ø¨Ø·
            const encodedMessage = encodeURIComponent(message);
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨
            const whatsappLink = `https://wa.me/${whatsappNumber.replace(/\D/g, '')}?text=${encodedMessage}`;
            
            // Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
            const totalOrders = parseInt(localStorage.getItem('extension_total_orders') || '0') + 1;
            localStorage.setItem('extension_total_orders', totalOrders.toString());
            
            // ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
            window.open(whatsappLink, '_blank');
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙˆØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©
            purchaseModal.style.display = 'none';
            cart = [];
            localStorage.setItem('extension_cart', JSON.stringify(cart));
            updateUI();
            showNotification('ØªÙ… ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…Ù„Ø©');
        }
        
        // ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ù„ÙˆØ§Ù†
        function changeColor(color, type) {
            document.documentElement.style.setProperty(`--${type}`, color);
            const savedColors = JSON.parse(localStorage.getItem('extension_colors')) || {};
            savedColors[type] = color;
            localStorage.setItem('extension_colors', JSON.stringify(savedColors));
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ù„ÙˆØ§Ù†
        function resetColors() {
            const defaultColors = {
                'dark-bg': '#0a0a0a',
                'medium-bg': '#111111',
                'light-bg': '#1a1a1a',
                'primary-color': '#006400',
                'secondary-color': '#008000',
                'accent-color': '#00ff00',
                'text-color': '#e0e0e0',
                'button-color': '#006400',
                'cart-color': '#00ff00',
                'discount-color': '#ff6b6b',
                'currency-color': '#4da6ff'
            };
            
            for (const [key, value] of Object.entries(defaultColors)) {
                document.documentElement.style.setProperty(`--${key}`, value);
            }
            
            localStorage.setItem('extension_colors', JSON.stringify(defaultColors));
            showNotification('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¥Ù„Ù‰ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©');
            renderColorPickers();
        }
        
        // Ø¥Ø¶Ø§ÙØ© ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¬ÙˆØ§Ù„
        function addMobileVideo(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
                savedMedia.mobileVideo = e.target.result;
                localStorage.setItem('extension_media', JSON.stringify(savedMedia));
                
                bannerVideo.src = e.target.result;
                mobileVideoBanner.style.display = 'block';
                videoFileName.textContent = file.name;
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ù†Ø¬Ø§Ø­');
            };
            reader.readAsDataURL(file);
        }
        
        // Ø¥Ø²Ø§Ù„Ø© ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¬ÙˆØ§Ù„
        function removeMobileVideo() {
            const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
            delete savedMedia.mobileVideo;
            localStorage.setItem('extension_media', JSON.stringify(savedMedia));
            
            bannerVideo.src = '';
            mobileVideoBanner.style.display = 'none';
            videoFileName.textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ÙÙŠØ¯ÙŠÙˆ';
            showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ');
        }
        
        // Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ù…ØªØ­Ø±ÙƒØ©
        function addFloatingImage(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
                savedMedia.floatingImage = e.target.result;
                localStorage.setItem('extension_media', JSON.stringify(savedMedia));
                
                floatingImage.src = e.target.result;
                floatingImage.style.display = 'block';
                floatingImageVisible = true;
                floatingImageFileName.textContent = file.name;
                updateFloatingImageToggle();
                startFloatingAnimation();
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­');
            };
            reader.readAsDataURL(file);
        }
        
        // Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
        function toggleFloatingImage() {
            if (!floatingImageVisible) return;
            
            floatingImage.style.display = floatingImage.style.display === 'none' ? 'block' : 'none';
            if (floatingImage.style.display === 'block') {
                startFloatingAnimation();
                floatingImageToggle.classList.remove('hidden');
            } else {
                floatingImageToggle.classList.add('hidden');
            }
        }
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
        function removeFloatingImage() {
            const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
            delete savedMedia.floatingImage;
            localStorage.setItem('extension_media', JSON.stringify(savedMedia));
            
            floatingImage.src = '';
            floatingImage.style.display = 'none';
            floatingImageVisible = false;
            floatingImageFileName.textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©';
            stopFloatingAnimation();
            updateFloatingImageToggle();
            showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©');
        }
        
        // ØªØºÙŠÙŠØ± Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
        function updateAnimationSettings() {
            const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
            savedMedia.animationSpeed = animationSpeed.value;
            savedMedia.animationDirection = animationDirection.value;
            localStorage.setItem('extension_media', JSON.stringify(savedMedia));
            
            currentAnimationDirection = animationDirection.value;
            
            if (floatingImageVisible) {
                startFloatingAnimation();
            }
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹
        function addBackgroundImage(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
                savedMedia.backgroundImage = e.target.result;
                localStorage.setItem('extension_media', JSON.stringify(savedMedia));
                
                document.body.style.backgroundImage = `url(${e.target.result})`;
                backgroundFileName.textContent = file.name;
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­');
            };
            reader.readAsDataURL(file);
        }
        
        // Ø¥Ø²Ø§Ù„Ø© Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹
        function removeBackgroundImage() {
            const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
            delete savedMedia.backgroundImage;
            localStorage.setItem('extension_media', JSON.stringify(savedMedia));
            
            document.body.style.backgroundImage = 'none';
            backgroundFileName.textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø®Ù„ÙÙŠØ©';
            showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹');
        }
        
        // Ø¥Ø¶Ø§ÙØ© CSS Ù…Ø®ØµØµ
        function addCustomCss(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
                savedMedia.customCss = e.target.result;
                localStorage.setItem('extension_media', JSON.stringify(savedMedia));
                
                applyCustomCss(e.target.result);
                cssFileName.textContent = file.name;
                showNotification('ØªÙ… ØªØ·Ø¨ÙŠÙ‚ CSS Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ Ø¨Ù†Ø¬Ø§Ø­');
            };
            reader.readAsText(file);
        }
        
        // Ø¥Ø²Ø§Ù„Ø© CSS Ø§Ù„Ù…Ø®ØµØµ
        function removeCustomCss() {
            const savedMedia = JSON.parse(localStorage.getItem('extension_media')) || {};
            delete savedMedia.customCss;
            localStorage.setItem('extension_media', JSON.stringify(savedMedia));
            
            const customStyle = document.getElementById('custom-css-style');
            if (customStyle) {
                customStyle.remove();
            }
            cssFileName.textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù CSS';
            showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© CSS Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ');
        }
        
        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function exportData() {
            const data = {
                products,
                categories,
                messages,
                whatsappNumber,
                adminPassword,
                colors: JSON.parse(localStorage.getItem('extension_colors')) || {},
                media: JSON.parse(localStorage.getItem('extension_media')) || {},
                siteName: localStorage.getItem('extension_site_name'),
                logo: localStorage.getItem('extension_logo'),
                globalDiscount,
                baseCurrency,
                userCurrency,
                autoGeolocation,
                userCountry,
                totalOrders: localStorage.getItem('extension_total_orders'),
                exportedAt: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `Ø§Ù…ØªØ¯Ø§Ø¯_Ù†Ø³Ø®Ø©_Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©_${new Date().toISOString().slice(0,10)}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function importData(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!confirm('Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ')) {
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    if (data.products) {
                        products = data.products;
                        localStorage.setItem('extension_products', JSON.stringify(products));
                    }
                    if (data.categories) {
                        categories = data.categories;
                        localStorage.setItem('extension_categories', JSON.stringify(categories));
                    }
                    if (data.messages) {
                        messages = data.messages;
                        localStorage.setItem('extension_messages', JSON.stringify(messages));
                    }
                    if (data.whatsappNumber) {
                        whatsappNumber = data.whatsappNumber;
                        localStorage.setItem('extension_whatsapp', whatsappNumber);
                    }
                    if (data.adminPassword) {
                        adminPassword = data.adminPassword;
                        localStorage.setItem('extension_password', adminPassword);
                    }
                    if (data.colors) {
                        localStorage.setItem('extension_colors', JSON.stringify(data.colors));
                    }
                    if (data.media) {
                        localStorage.setItem('extension_media', JSON.stringify(data.media));
                    }
                    if (data.siteName) {
                        localStorage.setItem('extension_site_name', data.siteName);
                    }
                    if (data.logo) {
                        localStorage.setItem('extension_logo', data.logo);
                    }
                    if (data.globalDiscount !== undefined) {
                        globalDiscount = data.globalDiscount;
                        localStorage.setItem('extension_global_discount', JSON.stringify(globalDiscount));
                    }
                    if (data.baseCurrency) {
                        baseCurrency = data.baseCurrency;
                        localStorage.setItem('extension_base_currency', baseCurrency);
                    }
                    if (data.userCurrency) {
                        userCurrency = data.userCurrency;
                        localStorage.setItem('extension_user_currency', userCurrency);
                    }
                    if (data.autoGeolocation !== undefined) {
                        autoGeolocation = data.autoGeolocation;
                        localStorage.setItem('extension_auto_geolocation', autoGeolocation);
                    }
                    if (data.userCountry) {
                        userCountry = data.userCountry;
                        localStorage.setItem('extension_user_country', userCountry);
                    }
                    if (data.totalOrders) {
                        localStorage.setItem('extension_total_orders', data.totalOrders);
                    }
                    
                    updateUI();
                    showNotification('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
                } catch (error) {
                    alert('Ø®Ø·Ø£ ÙÙŠ Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ' + error.message);
                }
            };
            reader.readAsText(file);
        }
        
        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬
        function handleSearch() {
            searchQuery = productSearch.value;
            clearSearchBtn.style.display = searchQuery ? 'block' : 'none';
            renderProducts();
        }
        
        // Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«
        function clearSearch() {
            productSearch.value = '';
            searchQuery = '';
            clearSearchBtn.style.display = 'none';
            renderProducts();
        }
        
        // ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØµÙ†ÙŠÙ
        function changeSort(sortType) {
            currentSort = sortType;
            sortButtons.forEach(btn => {
                if (btn.dataset.sort === sortType) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            renderProducts();
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
        function showNotification(message) {
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¨ÙˆÙŠØ¨ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        function switchAdminTab(tabName) {
            adminTabs.forEach(tab => {
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            adminTabContents.forEach(content => {
                if (content.id === `admin-${tabName}`) {
                    content.style.display = 'block';
                } else {
                    content.style.display = 'none';
                }
            });
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        function switchSection(sectionName) {
            currentSection = sectionName;
            updateUI();
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        function setupEventListeners() {
            cartIcon.addEventListener('click', handlePurchase);
            adminLogin.addEventListener('click', toggleAdmin);
            addProductForm.addEventListener('submit', addOrUpdateProduct);
            addCategoryForm.addEventListener('submit', addNewCategory);
            addMessageForm.addEventListener('submit', addNewMessage);
            changeWhatsappForm.addEventListener('submit', changeWhatsappNumber);
            changePasswordForm.addEventListener('submit', changePassword);
            changeSiteNameForm.addEventListener('submit', changeSiteName);
            globalDiscountForm.addEventListener('submit', applyGlobalDiscount);
            removeGlobalDiscountBtn.addEventListener('click', removeGlobalDiscount);
            saveBaseCurrencyBtn.addEventListener('click', changeBaseCurrency);
            convertCurrencyBtn.addEventListener('click', convertCurrencyManual);
            autoGeolocationCheckbox.addEventListener('change', toggleGeolocation);
            updateExchangeRatesBtn.addEventListener('click', () => {
                showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù');
                updateExchangeRatesDisplay();
            });
            
            closeModal.addEventListener('click', () => { purchaseModal.style.display = 'none'; });
            closeImageModal.addEventListener('click', () => { imageModal.style.display = 'none'; });
            closeBanner.addEventListener('click', removeMobileVideo);
            confirmPurchaseButton.addEventListener('click', confirmPurchase);
            resetColorsButton.addEventListener('click', resetColors);
            removeVideoButton.addEventListener('click', removeMobileVideo);
            removeFloatingImageButton.addEventListener('click', removeFloatingImage);
            removeBackgroundButton.addEventListener('click', removeBackgroundImage);
            closeWelcomeBtn.addEventListener('click', () => { 
                welcomeModal.style.display = 'none'; 
                localStorage.setItem('extension_welcome_shown', 'true');
            });
            floatingImageToggle.addEventListener('click', toggleFloatingImage);
            productSearch.addEventListener('input', handleSearch);
            clearSearchBtn.addEventListener('click', clearSearch);
            exportDataBtn.addEventListener('click', exportData);
            importDataInput.addEventListener('change', importData);
            customCssInput.addEventListener('change', addCustomCss);
            removeCustomCssBtn.addEventListener('click', removeCustomCss);
            
            sortButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    changeSort(btn.dataset.sort);
                });
            });
            
            productImageInput.addEventListener('change', function() {
                fileNameSpan.textContent = this.files.length > 0 ? this.files[0].name : 'Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©';
            });
            
            mobileVideoInput.addEventListener('change', addMobileVideo);
            floatingImageInput.addEventListener('change', addFloatingImage);
            backgroundImageInput.addEventListener('change', addBackgroundImage);
            animationSpeed.addEventListener('input', updateAnimationSettings);
            animationDirection.addEventListener('change', updateAnimationSettings);
            
            window.addEventListener('click', (e) => {
                if (e.target === purchaseModal) purchaseModal.style.display = 'none';
                if (e.target === imageModal) imageModal.style.display = 'none';
                if (e.target === welcomeModal) welcomeModal.style.display = 'none';
            });
            
            const logoData = localStorage.getItem('extension_logo');
            if (logoData) siteLogo.src = logoData;
            
            logoContainer.addEventListener('click', () => {
                if (!isAdmin) return;
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = function(e) {
                    const file = e.target.files[0];
                    if (!file) return;
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        siteLogo.src = e.target.result;
                        localStorage.setItem('extension_logo', e.target.result);
                        showNotification('ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­');
                    };
                    reader.readAsDataURL(file);
                };
                input.click();
            });
            
            adminTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    switchAdminTab(tab.getAttribute('data-tab'));
                });
            });
            
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    switchSection(link.getAttribute('data-section'));
                });
            });
            
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('color-option')) {
                    const color = e.target.getAttribute('data-color');
                    const type = e.target.getAttribute('data-type');
                    const parent = e.target.parentElement;
                    parent.querySelectorAll('.color-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    e.target.classList.add('active');
                    changeColor(color, type);
                }
                
                if (e.target.classList.contains('currency-option') || e.target.parentElement.classList.contains('currency-option')) {
                    const currencyOption = e.target.classList.contains('currency-option') ? e.target : e.target.parentElement;
                    const parent = currencyOption.parentElement;
                    parent.querySelectorAll('.currency-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    currencyOption.classList.add('active');
                }
            });
            
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù‚ÙŠÙ…
            convertFromInput.addEventListener('input', convertCurrencyManual);
            convertFromCurrency.addEventListener('change', convertCurrencyManual);
            convertToCurrency.addEventListener('change', convertCurrencyManual);
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function init() {
            if (products.length === 0) {
                products = [
                    {
                        id: '1',
                        title: 'Ø¨ÙˆØ²Ø± Ø§Ù†Ø³ØªØ§',
                        basePrice: 5,
                        currency: 'YER',
                        discount: 10,
                        category: 'ØªÙ‚Ø³Ø§Ù…Ø§Øª Ù…ÙˆØ§Ø¯',
                        description: 'Ø¨ÙˆØ²Ø± Ø§Ù†Ø³ØªØ§ Ø´Ø¨Ù‡ Ø±ÙŠØ§Ø¹ÙŠ Ù…Ø¹ Ø±Ù‚Ù… ÙÙŠ Ø§Ù„Ø¨ÙˆØ²Ø±',
                        price: '5 Ø±.ÙŠ',
                        image: 'https://via.placeholder.com/300x200/117a4e/ffffff?text=Ø¨ÙˆØ²Ø±+Ø§Ù†Ø³ØªØ§',
                        sold: false,
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '2',
                        title: 'Ù…Ù†ØªØ¬ Ù…Ø«Ø§Ù„ 2',
                        basePrice: 200,
                        currency: 'YER',
                        discount: 0,
                        category: 'ØªÙ‚Ø³Ø§Ù…Ø§Øª Ù…ÙˆØ§Ø¯',
                        description: 'Ù‡Ø°Ø§ ÙˆØµÙ Ù„Ù…Ù†ØªØ¬ Ù…Ø«Ø§Ù„ ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù…Ø¹Ø±Ø¶',
                        price: '200 Ø±.ÙŠ',
                        image: 'https://via.placeholder.com/300x200/0a3d2d/ffffff?text=Ù…Ù†ØªØ¬+2',
                        sold: false,
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '3',
                        title: 'Ù…Ù†ØªØ¬ Ù…Ø«Ø§Ù„ 3',
                        basePrice: 150,
                        currency: 'YER',
                        discount: 20,
                        category: 'Ø§Ø±Ù‚Ø§Ù… ÙˆÙ‡ÙŠØ¨Ø©',
                        description: 'Ù‡Ø°Ø§ ÙˆØµÙ Ù„Ù…Ù†ØªØ¬ Ù…Ø«Ø§Ù„ ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù…Ø¹Ø±Ø¶',
                        price: '150 Ø±.ÙŠ',
                        image: 'https://via.placeholder.com/300x200/1aa86a/ffffff?text=Ù…Ù†ØªØ¬+3',
                        sold: false,
                        createdAt: new Date().toISOString()
                    }
                ];
                localStorage.setItem('extension_products', JSON.stringify(products));
            }
            
            updateUI();
            setupEventListeners();
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ù…ÙØ¹Ù„Ø§Ù‹ØŒ Ù‚Ù… Ø¨Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹
            if (autoGeolocation) {
                setTimeout(() => {
                    detectUserLocation();
                }, 1000);
            }
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        init();
    </script>
</body>
</html>